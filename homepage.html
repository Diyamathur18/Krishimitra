<!DOCTYPE html>
<html lang="hi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>üåæ ‡§ï‡•É‡§∑‡§ø‡§Æ‡§ø‡§§‡•ç‡§∞ AI - ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§¶‡•ã‡§∏‡•ç‡§§ - v2.1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .navbar-brand {
            font-weight: bold;
            color: #2d5016 !important;
            font-size: 1.5rem;
        }

        .hero-section {
            background: linear-gradient(135deg, #2d5016 0%, #4a7c59 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
        }

        .hero-title {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Location Search Styles */
        .location-search-container {
            max-width: 600px;
            margin: 30px auto;
            position: relative;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 50px;
            padding: 10px 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .search-box:focus-within {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }

        .search-box i {
            color: #4a7c59;
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .search-box input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1.1rem;
            padding: 10px;
            color: #333;
        }

        .search-box input::placeholder {
            color: #999;
        }

        .search-box .btn {
            border-radius: 50px;
            padding: 8px 15px;
            margin-left: 10px;
        }

        .location-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .location-suggestion {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .location-suggestion:hover {
            background: #f8f9fa;
            color: #4a7c59;
        }

        .location-suggestion:last-child {
            border-bottom: none;
        }

        .suggestion-name {
            font-weight: 600;
            color: #333;
        }

        .suggestion-details {
            font-size: 0.9rem;
            color: #666;
        }

        .current-location-display {
            margin-top: 20px;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
        }

        .location-label {
            font-weight: 600;
        }

        .location-name {
            font-weight: 700;
            font-size: 1.1rem;
        }

        /* Crop Search Styles */
        .crop-search-container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .crop-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .crop-suggestion {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .crop-suggestion:hover {
            background: #f8f9fa;
            color: #4a7c59;
        }

        .crop-suggestion:last-child {
            border-bottom: none;
        }

        .crop-suggestion-name {
            font-weight: 600;
            color: #333;
        }

        .crop-suggestion-details {
            font-size: 0.9rem;
            color: #666;
        }

        /* Crop Analysis Styles */
        .crop-analysis-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .crop-analysis-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4a7c59;
        }

        .crop-analysis-card h5 {
            color: #2c5530;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .analysis-item {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.95rem;
        }

        .analysis-item:last-child {
            border-bottom: none;
        }

        .analysis-item strong {
            color: #4a7c59;
            font-weight: 600;
        }

        /* Crops Grid Layout */
        .crops-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .crop-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4a7c59;
            transition: all 0.3s ease;
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }

        .crop-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .crop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .crop-header h5 {
            color: #2c5530;
            font-size: 1.3rem;
            font-weight: 700;
            margin: 0;
        }

        .crop-rank {
            background: #4a7c59;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .profitability-score {
            background: #e8f5e8;
            color: #2c5530;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .crop-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .crop-info {
            margin-bottom: 15px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: #4a7c59;
            font-size: 0.95rem;
        }

        .info-value {
            font-weight: 500;
            color: #333;
            font-size: 0.95rem;
            text-align: right;
        }

        .crop-scores {
            margin-top: auto;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
        }

        .score-label {
            font-weight: 600;
            color: #4a7c59;
            font-size: 0.9rem;
        }

        .score-value {
            font-weight: 500;
            color: #333;
            font-size: 0.9rem;
        }

        /* Universal Service Card Styles */
        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .service-card-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4a7c59;
            transition: all 0.3s ease;
            min-height: 350px;
            display: flex;
            flex-direction: column;
        }

        .service-card-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .service-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .service-card-header h5 {
            color: #2c5530;
            font-size: 1.2rem;
            font-weight: 700;
            margin: 0;
        }

        .service-card-badge {
            background: #4a7c59;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .service-card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .service-card-info {
            margin-bottom: 15px;
        }

        .service-info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .service-info-item:last-child {
            border-bottom: none;
        }

        .service-info-label {
            font-weight: 600;
            color: #4a7c59;
            font-size: 0.95rem;
        }

        .service-info-value {
            font-weight: 500;
            color: #333;
            font-size: 0.95rem;
            text-align: right;
        }

        .service-card-actions {
            margin-top: auto;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }

        .service-action-btn {
            background: #4a7c59;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 8px;
        }

        .service-action-btn:hover {
            background: #2c5530;
            transform: translateY(-2px);
        }

        .service-action-btn.secondary {
            background: #e8f5e8;
            color: #2c5530;
        }

        .service-action-btn.secondary:hover {
            background: #d4edda;
        }

        /* Mandi Search Styles */
        .mandi-search-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #dee2e6;
        }

        .mandi-search-container h5 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
        }

        .search-boxes-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .search-box {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .search-box label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .mandi-search-box,
        .crop-search-box {
            display: flex;
            gap: 10px;
        }

        .mandi-search-box input,
        .crop-search-box input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .mandi-search-box input:focus,
        .crop-search-box input:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .mandi-search-box button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .crop-search-box button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mandi-search-box button:hover {
            background: linear-gradient(135deg, #0056b3 0%, #004085 100%);
            transform: translateY(-1px);
        }

        .crop-search-box button:hover {
            background: linear-gradient(135deg, #1e7e34 0%, #155724 100%);
            transform: translateY(-1px);
        }

        /* Mandi Dropdown and Crop Filter Styles */
        .mandi-selection-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .mandi-dropdown-container,
        .crop-filter-container {
            flex: 1;
            min-width: 250px;
        }

        .mandi-dropdown-container label,
        .crop-filter-container label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }

        .mandi-dropdown {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            background-color: white;
            transition: border-color 0.3s ease;
        }

        .mandi-dropdown:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .mandi-info-text {
            margin-top: 5px;
        }

        .mandi-info-text small {
            color: #6c757d;
            font-size: 12px;
        }

        #cropFilter {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        #cropFilter:focus {
            border-color: #28a745;
            outline: none;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
        }

        /* Mandi Prices Grid - Square Boxes */
        .mandi-prices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .mandi-price-square {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .mandi-price-square:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .square-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f8f9fa;
        }

        .square-header h6 {
            color: #2c3e50;
            font-weight: 600;
            margin: 0;
            font-size: 16px;
        }

        .trend-icon {
            font-size: 18px;
        }

        .square-content {
            text-align: center;
        }

        .price-main {
            margin-bottom: 15px;
        }

        .current-price {
            font-size: 24px;
            font-weight: 700;
            color: #28a745;
        }

        .price-unit {
            font-size: 14px;
            color: #6c757d;
            margin-left: 5px;
        }

        .price-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
        }

        .detail-row .label {
            font-size: 12px;
            color: #6c757d;
            font-weight: 500;
        }

        .detail-row .value {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
        }

        .detail-row .value.profit {
            color: #28a745;
        }

        .detail-row .value.profit-percent {
            color: #28a745;
        }

        .mandi-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 10px;
            border-top: 1px solid #f8f9fa;
            font-size: 12px;
            color: #6c757d;
        }

        .mandi-name {
            font-weight: 600;
        }

        .mandi-results {
            margin-top: 15px;
        }

        /* Search Results Styles */
        .mandi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .mandi-summary-square {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease;
        }

        .mandi-summary-square:hover {
            transform: translateY(-2px);
        }

        .mandi-summary-square .square-header h6 {
            font-size: 14px;
            margin-bottom: 10px;
        }

        .mandi-summary-square .price-main {
            margin-bottom: 10px;
        }

        .mandi-summary-square .current-price {
            font-size: 18px;
        }

        .mandi-summary-square .mandi-name {
            font-size: 12px;
            margin-bottom: 5px;
        }

        .profit-info {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
        }

        .profit-info .profit {
            color: #28a745;
            font-weight: 600;
        }

        .profit-info .profit-percent {
            color: #28a745;
            font-weight: 600;
        }

        /* Crop Details Grid */
        .crop-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .crop-detail-square {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
            text-align: center;
        }

        .detail-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .detail-value {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .detail-value.profit {
            color: #28a745;
        }

        .detail-value.profit-percent {
            color: #28a745;
        }

        .crop-result-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .crop-result-card h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
        }

        /* Pest Analysis Styles */
        .pest-analysis-container {
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .analysis-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .analysis-header h4 {
            color: #2c5530;
            margin-bottom: 10px;
        }

        .image-analysis-result {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .analysis-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #28a745;
        }

        .analysis-card h5 {
            color: #2c5530;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .analysis-details {
            display: grid;
            gap: 10px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-item .label {
            font-weight: 600;
            color: #495057;
        }

        .detail-item .value {
            font-weight: bold;
            color: #2c5530;
        }

        .detail-item .value.high {
            color: #dc3545;
        }

        .detail-item .value.severe {
            color: #dc3545;
            font-size: 1.1em;
        }

        .detail-item .value.moderate {
            color: #ffc107;
        }

        .detail-item .value.low {
            color: #28a745;
        }

        .treatment-recommendations {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #ffc107;
        }

        .treatment-recommendations h5 {
            color: #856404;
            margin-bottom: 15px;
        }

        .recommendations-grid {
            display: grid;
            gap: 15px;
        }

        .recommendation-card {
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .recommendation-card h6 {
            color: #2c5530;
            margin-bottom: 10px;
        }

        .recommendation-card p {
            margin: 5px 0;
            color: #495057;
        }

        .pest-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .pest-category,
        .disease-category {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 20px;
        }

        .pest-category {
            border-left: 4px solid #17a2b8;
        }

        .disease-category {
            border-left: 4px solid #dc3545;
        }

        .pest-category h5,
        .disease-category h5 {
            margin-bottom: 15px;
            color: #2c5530;
        }

        .pest-item,
        .disease-item {
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .pest-item h6,
        .disease-item h6 {
            color: #2c5530;
            margin-bottom: 10px;
        }

        .pest-item p,
        .disease-item p {
            margin: 5px 0;
            color: #495057;
        }

        /* Mobile Responsive for Pest Analysis */
        @media (max-width: 768px) {
            .image-analysis-result {
                grid-template-columns: 1fr;
            }

            .pest-info-grid {
                grid-template-columns: 1fr;
            }

            .analysis-details {
                gap: 8px;
            }

            .detail-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
        }

        .mandi-result-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .mandi-result-card h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 18px;
        }

        .mandi-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .mandi-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .mandi-item .label {
            font-weight: 600;
            color: #495057;
        }

        .mandi-item .value {
            color: #2c3e50;
            font-weight: 500;
        }

        .mandi-analysis {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .mandi-results-summary {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .mandi-results-summary h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .mandi-summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .mandi-summary-item:last-child {
            border-bottom: none;
        }

        .crop-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .crop-price {
            color: #28a745;
            font-weight: 600;
        }

        .crop-mandi {
            color: #6c757d;
            font-size: 14px;
        }

        .loading,
        .no-results,
        .error {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            font-style: italic;
        }

        .error {
            color: #dc3545;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .search-boxes-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .mandi-search-box,
            .crop-search-box {
                flex-direction: column;
            }

            .mandi-prices-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .price-details {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .mandi-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .crop-details-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .mandi-info {
                flex-direction: column;
                gap: 5px;
                text-align: center;
            }

            .profit-info {
                flex-direction: column;
                gap: 5px;
                text-align: center;
            }
        }

        .services-container {
            padding: 60px 0;
            background: white;
        }

        .service-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer !important;
            border: 2px solid transparent;
            pointer-events: auto !important;
            user-select: none;
            position: relative;
            z-index: 1;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-color: #4a7c59;
        }

        .service-card:active {
            transform: scale(0.95);
            transition: transform 0.1s ease;
        }

        .service-card * {
            pointer-events: auto;
            position: relative;
            z-index: 2;
        }

        .service-card button {
            pointer-events: auto !important;
            cursor: pointer;
            z-index: 3;
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #4a7c59;
        }

        .service-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2d5016;
            margin-bottom: 15px;
        }

        .service-description {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .service-button {
            background: linear-gradient(135deg, #4a7c59 0%, #2d5016 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .service-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(74, 124, 89, 0.4);
        }

        .content-section {
            display: none;
            padding: 40px 0;
            background: #f8f9fa;
        }

        .content-section.active {
            display: block;
        }

        .data-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading i {
            font-size: 2rem;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .status-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 12px;
            height: 12px;
            background: #28a745;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }

            100% {
                opacity: 1;
            }
        }

        /* Real-Time Data Display Styles */
        .real-time-header {
            background: linear-gradient(135deg, #2d5016 0%, #4a7c59 100%);
            color: white;
            padding: 25px 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(74, 124, 89, 0.3);
        }

        .real-time-header h4 {
            margin-bottom: 15px;
            font-size: 1.6rem;
            font-weight: 600;
        }

        .data-source,
        .timestamp,
        .reliability,
        .analysis-info,
        .scheme-count {
            font-size: 0.95rem;
            opacity: 0.9;
            margin: 8px 0;
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            display: inline-block;
        }

        .scheme-count {
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }

        /* Scheme Card Styles */
        .scheme-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4a7c59;
            transition: all 0.3s ease;
        }

        .scheme-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .scheme-card h5 {
            color: #2c5530;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .scheme-card p {
            margin-bottom: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .scheme-card strong {
            color: #4a7c59;
            font-weight: 600;
        }

        .scheme-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .scheme-actions .btn {
            flex: 1;
            min-width: 120px;
            padding: 10px 15px;
            font-size: 0.9rem;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .scheme-actions .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .schemes-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .scheme-details {
            margin-bottom: 15px;
        }

        .scheme-card {
            animation: fadeInUp 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .real-time-header {
                padding: 20px 15px;
                margin-bottom: 20px;
            }

            .real-time-header h4 {
                font-size: 1.4rem;
                margin-bottom: 12px;
            }

            .data-source,
            .timestamp,
            .reliability,
            .analysis-info,
            .scheme-count {
                font-size: 0.85rem;
                margin: 6px 0;
                padding: 4px 8px;
            }

            .scheme-card {
                padding: 15px;
                margin-bottom: 15px;
            }

            .scheme-card h5 {
                font-size: 1.2rem;
                margin-bottom: 12px;
            }

            .scheme-card p {
                font-size: 0.9rem;
                margin-bottom: 8px;
            }

            .scheme-actions {
                margin-top: 15px;
                gap: 8px;
            }

            .scheme-actions .btn {
                padding: 8px 12px;
                font-size: 0.85rem;
                min-width: 100px;
            }

            .schemes-container {
                gap: 15px;
            }

            .container {
                padding: 0 15px;
            }
        }

        @media (max-width: 480px) {
            .real-time-header h4 {
                font-size: 1.2rem;
            }

            .scheme-card h5 {
                font-size: 1.1rem;
            }

            .scheme-actions {
                flex-direction: column;
            }

            .scheme-actions .btn {
                width: 100%;
                margin-bottom: 5px;
            }

            .schemes-container {
                gap: 12px;
            }

            .location-search-container {
                max-width: 100%;
                margin: 20px auto;
            }

            .search-box {
                padding: 8px 15px;
            }

            .search-box input {
                font-size: 1rem;
                padding: 8px;
            }

            .current-location-display {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .crops-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .crop-card {
                min-height: 350px;
                padding: 15px;
            }

            .crop-header h5 {
                font-size: 1.1rem;
            }

            .service-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .service-card-item {
                min-height: 300px;
                padding: 15px;
            }

            .service-card-header h5 {
                font-size: 1.1rem;
            }
        }

        /* Crop Card Styles */
        .crop-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4a7c59;
        }

        .crop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .crop-header h5 {
            color: #2d5016;
            margin: 0;
        }

        .profitability-score {
            background: #4a7c59;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
        }

        .crop-details {
            margin-bottom: 15px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .detail-row .label {
            font-weight: bold;
            color: #666;
        }

        .detail-row .value {
            color: #2d5016;
            font-weight: 500;
        }

        .crop-scores {
            margin-top: 15px;
        }

        .score-item {
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
            display: block;
        }

        .score-bar {
            background: #f0f0f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .score-fill {
            background: linear-gradient(90deg, #4a7c59, #2d5016);
            height: 100%;
            transition: width 0.3s ease;
        }

        .score-value {
            font-size: 0.8rem;
            color: #4a7c59;
            font-weight: bold;
        }

        /* Weather Card Styles */
        .weather-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .current-weather {
            margin-bottom: 20px;
        }

        .weather-main {
            text-align: center;
            margin-bottom: 15px;
        }

        .weather-temp {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2d5016;
            margin: 10px 0;
        }

        .weather-condition {
            font-size: 1.2rem;
            color: #666;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .detail-item .icon {
            font-size: 1.2rem;
        }

        .detail-item .label {
            font-weight: bold;
            color: #666;
        }

        .detail-item .value {
            color: #2d5016;
            font-weight: 500;
        }

        .weather-forecast {
            margin-bottom: 20px;
        }

        .weather-forecast h6 {
            color: #2d5016;
            margin-bottom: 15px;
        }

        .forecast-day {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .farmer-advisory {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .farmer-advisory h6 {
            color: #2d5016;
            margin-bottom: 10px;
        }

        .advisory-details {
            margin-top: 10px;
        }

        .advisory-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .advisory-item .icon {
            font-size: 1.1rem;
        }

        /* Price Card Styles */
        .price-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4a7c59;
        }

        .price-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .price-header h5 {
            color: #2d5016;
            margin: 0;
        }

        .price-trend {
            font-size: 1.2rem;
        }

        .trend-up {
            color: #28a745;
        }

        .trend-down {
            color: #dc3545;
        }

        .trend-stable {
            color: #6c757d;
        }

        .price-details {
            margin-bottom: 15px;
        }

        .price-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .price-item .label {
            font-weight: bold;
            color: #666;
        }

        .price-item .value {
            color: #2d5016;
            font-weight: 500;
        }

        .current-price {
            color: #28a745 !important;
            font-weight: bold !important;
        }

        .msp-price {
            color: #007bff !important;
            font-weight: bold !important;
        }

        .price-analysis {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .analysis-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .analysis-label {
            font-weight: bold;
            color: #666;
        }

        .analysis-value {
            color: #28a745;
            font-weight: bold;
        }

        .chat-container {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: white;
        }

        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
        }

        .user-message {
            background: #e3f2fd;
            margin-left: 20%;
        }

        .bot-message {
            background: #f1f8e9;
            margin-right: 20%;
        }

        .input-group {
            margin-top: 20px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            display: none;
        }

        .notification.success {
            background: #28a745;
        }

        .notification.error {
            background: #dc3545;
        }

        .notification.info {
            background: #17a2b8;
        }

        /* Weather UI Improvements */
        .weather-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .weather-temp {
            font-size: 3rem;
            font-weight: bold;
            color: #2d5016;
            margin: 10px 0;
        }

        .weather-condition {
            font-size: 1.2rem;
            color: #4a7c59;
            margin-bottom: 10px;
        }

        .weather-feels-like {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-item .icon {
            font-size: 1.2rem;
            margin-right: 10px;
            width: 25px;
        }

        .detail-item .label {
            font-weight: 500;
            margin-right: 10px;
            min-width: 100px;
        }

        .detail-item .value {
            font-weight: bold;
            color: #2d5016;
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .forecast-item {
            text-align: center;
            padding: 15px;
            background: rgba(45, 80, 22, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(45, 80, 22, 0.2);
        }

        .forecast-day {
            font-weight: bold;
            color: #2d5016;
            margin-bottom: 8px;
        }

        .forecast-temp {
            font-size: 1.1rem;
            font-weight: bold;
            color: #4a7c59;
            margin-bottom: 5px;
        }

        .forecast-condition {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .forecast-humidity,
        .forecast-wind {
            font-size: 0.8rem;
            color: #888;
        }

        .agricultural-advice {
            background: rgba(74, 124, 89, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4a7c59;
        }

        .agricultural-advice p {
            margin: 0;
            color: #2d5016;
            line-height: 1.6;
        }

        .real-time-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(45, 80, 22, 0.2);
        }

        .real-time-header h4 {
            color: #2d5016;
            margin-bottom: 10px;
        }

        .data-source {
            font-size: 0.9rem;
            color: #4a7c59;
            margin: 5px 0;
        }

        .timestamp {
            font-size: 0.8rem;
            color: #666;
            margin: 5px 0;
        }

        /* Chatbot Responsiveness */
        .chat-container {
            height: 400px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            background: #f9f9f9;
            margin-bottom: 15px;
        }

        .message {
            margin-bottom: 10px;
            padding: 10px 15px;
            border-radius: 20px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message {
            background: #4a7c59;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }

            .chat-container {
                height: 300px;
            }

            .service-card-item {
                min-height: auto;
                margin-bottom: 15px;
            }

            .location-search-container {
                width: 90%;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="#" data-i18n="app_title">‡§ï‡•É‡§∑‡§ø ‡§∏‡§≤‡§æ‡§π</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            üåê <span id="currentLanguage">‡§π‡§ø‡§Ç‡§¶‡•Ä</span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('en')">English</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('pa')">‡§™‡§Ç‡§ú‡§æ‡§¨‡•Ä</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('gu')">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('mr')">‡§Æ‡§∞‡§æ‡§†‡•Ä</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('ta')">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</a></li>
                            <li><a class="dropdown-item" href="#" onclick="changeLanguage('te')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</a></li>
                        </ul>
                    </div>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showService('home')" data-i18n="home">‡§π‡•ã‡§Æ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showService('weather')" data-i18n="weather">‡§Æ‡•å‡§∏‡§Æ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showService('market-prices')"
                            data-i18n="market_prices">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showService('government-schemes')"
                            data-i18n="schemes">‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showService('crop-recommendations')"
                            data-i18n="crop_advisory">‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showService('pest-control')" data-i18n="pest_control">‡§ï‡•Ä‡§ü
                            ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showService('ai-assistant')" data-i18n="ai_assistant">AI
                            ‡§∏‡§π‡§æ‡§Ø‡§ï</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container">
            <h1 class="hero-title" data-i18n="app_title">üåæ ‡§ï‡•É‡§∑‡§ø‡§Æ‡§ø‡§§‡•ç‡§∞ AI</h1>
            <p class="hero-subtitle" data-i18n="hero_subtitle">‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§¶‡•ã‡§∏‡•ç‡§§ - AI ‡§∏‡•á ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§ñ‡•á‡§§‡•Ä ‡§ï‡§∞‡•á‡§Ç</p>

            <!-- Location Search Bar -->
            <div class="location-search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="locationSearchInput" placeholder="‡§∂‡§π‡§∞, ‡§ú‡§ø‡§≤‡§æ ‡§Ø‡§æ ‡§ó‡§æ‡§Å‡§µ ‡§ñ‡•ã‡§ú‡•á‡§Ç..."
                        onkeyup="searchLocations(event)" onfocus="showLocationSuggestions()"
                        data-i18n="search_location_placeholder">
                    <button class="btn btn-primary" onclick="searchCurrentLocation()">
                        <i class="fas fa-map-marker-alt"></i>
                    </button>
                </div>
                <div id="locationSuggestions" class="location-suggestions"></div>
            </div>

            <div class="current-location-display">
                <span class="location-label" data-i18n="current_location_label">üìç ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§•‡§æ‡§®:</span>
                <span id="currentLocationDisplay" class="location-name">Delhi</span>
                <button class="btn btn-sm btn-outline-light" onclick="detectLocation()">
                    <i class="fas fa-crosshairs"></i> <span data-i18n="detect_location">‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Services Section -->
    <div class="services-container">
        <div class="container">
            <h2 class="text-center mb-5" style="color: #2d5016;" data-i18n="essential_services_title">‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è
                ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç</h2>

            <div class="row">
                <!-- Government Schemes -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card" data-service="government-schemes"
                        onclick="showService('government-schemes')">
                        <div class="status-indicator"></div>
                        <div class="service-icon">üèõÔ∏è</div>
                        <h3 class="service-title" data-i18n="schemes">‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h3>
                        <p class="service-description" data-i18n="schemes_description">‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§î‡§∞ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ï‡•É‡§∑‡§ø
                            ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç‡•§ ‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä, ‡§ã‡§£ ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ
                            ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä‡•§</p>
                        \u003cbutton class="service-button" onclick="event.stopPropagation();
                        this.parentElement.click();" data-i18n="view_schemes">‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
                    </div>
                </div>

                <!-- Crop Recommendations -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card" data-service="crop-recommendations"
                        onclick="showService('crop-recommendations')">
                        <div class="status-indicator"></div>
                        <div class="service-icon">üåæ</div>
                        <h3 class="service-title" data-i18n="crop_advisory">‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ</h3>
                        <p class="service-description" data-i18n="crop_advisory_description">AI ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Ü‡§™‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•á
                            ‡§≤‡§ø‡§è ‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•§ ‡§Æ‡•å‡§∏‡§Æ,
                            ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä, ‡§ï‡•Ä‡§Æ‡§§‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞‡•§</p>
                        \u003cbutton class="service-button" onclick="event.stopPropagation();
                        this.parentElement.click();" data-i18n="get_crop_advisory">‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>

                <!-- Weather -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card" data-service="weather" onclick="showService('weather')">
                        <div class="status-indicator"></div>
                        <div class="service-icon">üå§Ô∏è</div>
                        <h3 class="service-title" data-i18n="weather">‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</h3>
                        <p class="service-description" data-i18n="weather_description">‡§∏‡§ü‡•Ä‡§ï ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§î‡§∞
                            ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®‡•§ ‡§¨‡§æ‡§∞‡§ø‡§∂, ‡§§‡§æ‡§™‡§Æ‡§æ‡§®, ‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø ‡§∏‡§¨
                            ‡§ï‡•Å‡§õ ‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                        \u003cbutton class="service-button" onclick="event.stopPropagation();
                        this.parentElement.click();" data-i18n="view_weather">‡§Æ‡•å‡§∏‡§Æ ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
                    </div>
                </div>

                <!-- Market Prices -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card" data-service="market-prices" onclick="showService('market-prices')">
                        <div class="status-indicator"></div>
                        <div class="service-icon">üí∞</div>
                        <h3 class="service-title" data-i18n="market_prices">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç</h3>
                        <p class="service-description" data-i18n="market_prices_description">‡§∞‡§ø‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§î‡§∞
                            ‡§∞‡•Å‡§ù‡§æ‡§®‡•§ ‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§∏‡§π‡•Ä ‡§ï‡•Ä‡§Æ‡§§ ‡§ú‡§æ‡§®‡•á‡§Ç ‡§î‡§∞
                            ‡§¨‡•á‡§ö‡§®‡•á ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø ‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                        \u003cbutton class="service-button" onclick="event.stopPropagation();
                        this.parentElement.click();" data-i18n="view_prices">‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
                    </div>
                </div>

                <!-- Pest Control -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card" data-service="pest-control" onclick="showService('pest-control')">
                        <div class="status-indicator"></div>
                        <div class="service-icon">üêõ</div>
                        <h3 class="service-title" data-i18n="pest_control">‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£</h3>
                        <p class="service-description" data-i18n="pest_control_description">AI ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡•Ä‡§ü ‡§î‡§∞ ‡§∞‡•ã‡§ó ‡§ï‡•Ä
                            ‡§™‡§π‡§ö‡§æ‡§®‡•§ ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ú‡§æ‡§®‡•á‡§Ç
                            ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ï‡•à‡§∏‡•á ‡§†‡•Ä‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                        \u003cbutton class="service-button" onclick="event.stopPropagation();
                        this.parentElement.click();" data-i18n="check_now">‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>

                <!-- AI Assistant -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card" data-service="ai-assistant" onclick="showService('ai-assistant')">
                        <div class="status-indicator"></div>
                        <div class="service-icon">ü§ñ</div>
                        <h3 class="service-title" data-i18n="ai_assistant">AI ‡§∏‡§π‡§æ‡§Ø‡§ï</h3>
                        <p class="service-description" data-i18n="ai_assistant_description">‡§ï‡•É‡§∑‡§ø ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§∏‡§µ‡§æ‡§≤
                            ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§™‡§æ‡§è‡§Ç‡•§ 24/7 ‡§â‡§™‡§≤‡§¨‡•ç‡§ß AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§∏‡•á
                            ‡§¨‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç‡•§</p>
                        \u003cbutton class="service-button" onclick="event.stopPropagation();
                        this.parentElement.click();" data-i18n="talk_now">‡§¨‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Sections -->
    <div class="content-section" id="government-schemes-content">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="schemes_header">üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h2>
            <div id="schemesData" class="loading">
                <i class="fas fa-spinner"></i>
                <p data-i18n="loading_schemes">‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...</p>
            </div>
        </div>
    </div>

    <div class="content-section" id="crop-recommendations-content">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="crop_advisory_header">üåæ ‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ</h2>

            <!-- Crop Search Bar -->
            <div class="crop-search-container mb-4">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="cropSearchInput" placeholder="‡§´‡§∏‡§≤ ‡§ñ‡•ã‡§ú‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ß‡§æ‡§®, ‡§Æ‡§ï‡•ç‡§ï‡§æ)..."
                        onkeyup="searchCrop(event)" onfocus="showCropSuggestions()" data-i18n="search_crop_placeholder">
                    <button class="btn btn-primary" onclick="searchSpecificCrop()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div id="cropSuggestions" class="crop-suggestions"></div>
            </div>

            <div id="cropsData" class="loading">
                <i class="fas fa-spinner"></i>
                <p data-i18n="loading_crop_advisory">‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</p>
            </div>
        </div>
    </div>

    <div class="content-section" id="weather-content">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="weather_forecast_header">üå§Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</h2>
            <div id="weatherData" class="loading">
                <i class="fas fa-spinner"></i>
                <p data-i18n="loading_weather">‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...</p>
            </div>
        </div>
    </div>

    <div class="content-section" id="market-prices-content">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="text-center mb-0" data-i18n="market_prices_header">üí∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç</h2>
                <button onclick="forceReloadMarketPrices()" class="btn btn-outline-primary btn-sm">
                    <i class="fas fa-sync-alt"></i> <span data-i18n="refresh">‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∂ ‡§ï‡§∞‡•á‡§Ç</span>
                </button>
            </div>
            <div id="pricesData" class="loading">
                <i class="fas fa-spinner"></i>
                <p data-i18n="loading_market_prices">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...</p>
            </div>
        </div>
    </div>

    <div class="content-section" id="pest-control-content">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="pest_control_header">üêõ ‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£</h2>

            <!-- Image Upload Section -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 data-i18n="upload_crop_image_title"><i class="fas fa-camera"></i> ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§°
                                ‡§ï‡§∞‡•á‡§Ç</h5>
                        </div>
                        <div class="card-body">
                            <form id="pestImageForm" enctype="multipart/form-data">
                                <div class="mb-3">
                                    <label for="cropImage" class="form-label" data-i18n="select_crop_image_label">‡§´‡§∏‡§≤ ‡§ï‡•Ä
                                        ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç:</label>
                                    <input type="file" class="form-control" id="cropImage" accept="image/*" required>
                                    <div class="form-text" data-i18n="image_format_hint">JPG, PNG ‡§Ø‡§æ JPEG ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç
                                        ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</div>
                                </div>
                                <div class="mb-3">
                                    <label for="cropName" class="form-label" data-i18n="crop_name_label">‡§´‡§∏‡§≤ ‡§ï‡§æ
                                        ‡§®‡§æ‡§Æ:</label>
                                    <input type="text" class="form-control" id="cropName"
                                        placeholder="‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ö‡§æ‡§µ‡§≤, ‡§Æ‡§ï‡•ç‡§ï‡§æ" required
                                        data-i18n="crop_name_placeholder">
                                </div>
                                <div class="mb-3">
                                    <label for="symptoms" class="form-label"
                                        data-i18n="problem_description_label">‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£:</label>
                                    <textarea class="form-control" id="symptoms" rows="3"
                                        placeholder="‡§´‡§∏‡§≤ ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§¨‡§§‡§æ‡§è‡§Ç"
                                        data-i18n="symptoms_placeholder"></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-search"></i> <span data-i18n="analyze">‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç</span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 data-i18n="manual_analysis_title"><i class="fas fa-info-circle"></i> ‡§Æ‡•à‡§®‡•Å‡§Ö‡§≤ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£
                            </h5>
                        </div>
                        <div class="card-body">
                            <p data-i18n="manual_analysis_description">‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§≠‡•Ä ‡§ï‡•Ä‡§ü ‡§î‡§∞ ‡§∞‡•ã‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§
                                ‡§ï‡§∞‡•á‡§Ç:</p>
                            <button onclick="loadPestControl()" class="btn btn-outline-primary">
                                <i class="fas fa-bug"></i> <span data-i18n="general_pest_info">‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡•Ä‡§ü
                                    ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pestData" class="loading">
                <i class="fas fa-spinner"></i>
                <p data-i18n="loading_pest_control">‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...</p>
            </div>
        </div>
    </div>

    <div class="content-section" id="ai-assistant-content">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="ai_assistant_header">ü§ñ AI ‡§∏‡§π‡§æ‡§Ø‡§ï</h2>
            <div class="chat-container" id="chatMessages">
                <div class="message bot-message">
                    <strong data-i18n="ai_assistant_name">‡§ï‡•É‡§∑‡§ø‡§Æ‡§ø‡§§‡•ç‡§∞ AI:</strong> <span
                        data-i18n="ai_assistant_welcome">‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•É‡§∑‡§ø ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡•Ä ‡§∏‡§≠‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§
                        ‡§Ü‡§™
                        ‡§ï‡•ç‡§Ø‡§æ ‡§ú‡§æ‡§®‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?</span>
                </div>
            </div>
            <div class="input-group">
                <input type="text" class="form-control" id="messageInput" placeholder="‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç..."
                    data-i18n="type_your_question_placeholder">
                <button class="btn btn-success" onclick="sendMessage()" data-i18n="send">‡§≠‡•á‡§ú‡•á‡§Ç</button>
            </div>
            <div id="loading" style="display: none; text-align: center; margin-top: 10px;">
                <i class="fas fa-spinner"></i> <span data-i18n="thinking">‡§∏‡•ã‡§ö ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç...</span>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Global variables
        let currentLocation = 'Delhi';
        let currentLatitude = 28.7041;
        let currentLongitude = 77.1025;
        let sessionId = 'session_' + Date.now();
        let locationSearchTimeout;

        // Function to decode HTML entities
        function decodeHtmlEntities(text) {
            if (!text) return text;
            const textarea = document.createElement('textarea');
            textarea.innerHTML = text;
            return textarea.value;
        }

        // Show service content
        function showService(serviceName) {
            console.log('üéØ Showing service:', serviceName);

            try {
                // Hide all content sections
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                });

                // Show selected content
                const content = document.getElementById(serviceName + '-content');
                if (content) {
                    content.classList.add('active');
                    content.scrollIntoView({ behavior: 'smooth' });

                    // Load data for the service
                    loadServiceData(serviceName);
                } else {
                    console.error('Content section not found:', serviceName + '-content');
                    alert('Service content not found. Please try again.');
                }
            } catch (error) {
                console.error('Error showing service:', error);
                alert('Error loading service. Please try again.');
            }
        }

        // Load service data
        function loadServiceData(serviceName) {
            switch (serviceName) {
                case 'government-schemes':
                    loadGovernmentSchemes();
                    break;
                case 'crop-recommendations':
                    loadCropRecommendations();
                    break;
                case 'weather':
                    loadWeatherData();
                    break;
                case 'market-prices':
                    loadMarketPrices();
                    break;
                case 'pest-control':
                    loadPestControl();
                    break;
                case 'ai-assistant':
                    // AI assistant is already loaded
                    break;
            }
        }

        // Load Government Schemes - Ultra-Dynamic Real-Time Data
        async function loadGovernmentSchemes() {
            const container = document.getElementById('schemesData');

            try {
                // Add cache-busting timestamp
                const timestamp = new Date().getTime();
                const lang = localStorage.getItem('selectedLanguage') || 'hi';
                const response = await fetch(`/api/government-schemes/?location=${currentLocation}&latitude=${currentLatitude}&longitude=${currentLongitude}&t=${timestamp}&lang=${lang}`);
                const data = await response.json();

                console.log('Government Schemes Data for', currentLocation, ':', data);

                // Use combined schemes list or fallback to central_schemes
                // Handle nested data structure from UltraDynamicGovernmentAPI
                const schemes = data.schemes || data.central_schemes || (data.data && data.data.central_schemes) || [];

                if (schemes.length > 0) {
                    container.innerHTML = `
                        <div class="real-time-header">
                            <h4 data-i18n="schemes_header">üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source}</p>
                            <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                            <p class="scheme-count" data-i18n="total_schemes">üìä ‡§ï‡•Å‡§≤ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç: ${data.total_schemes || schemes.length}</p>
                        </div>
                        <div class="service-grid">
                            ${schemes.map((scheme, index) => `
                                <div class="service-card-item" style="animation-delay: ${index * 0.1}s">
                                    <div class="service-card-header">
                                        <h5>${scheme.name || scheme.name_en || 'Government Scheme'}</h5>
                                        <div class="service-card-badge" data-i18n="scheme_badge">‡§Ø‡•ã‡§ú‡§®‡§æ</div>
                                    </div>
                                    <div class="service-card-content">
                                        <div class="service-card-info">
                                            <div class="service-info-item">
                                                <span class="service-info-label" data-i18n="amount_label">üí∞ ‡§∞‡§æ‡§∂‡§ø:</span>
                                                <span class="service-info-value">${scheme.amount || translations[lang]['not_available']}</span>
                                            </div>
                                            <div class="service-info-item">
                                                <span class="service-info-label" data-i18n="description_label">üìù ‡§µ‡§ø‡§µ‡§∞‡§£:</span>
                                                <span class="service-info-value">${(scheme.description || translations[lang]['not_available']).substring(0, 50)}...</span>
                                            </div>
                                            <div class="service-info-item">
                                                <span class="service-info-label" data-i18n="eligibility_label">‚úÖ ‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ:</span>
                                                <span class="service-info-value">${scheme.eligibility || translations[lang]['all_farmers']}</span>
                                            </div>
                                            <div class="service-info-item">
                                                <span class="service-info-label" data-i18n="helpline_label">üìû ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:</span>
                                                <span class="service-info-value">${scheme.helpline || '1800-180-1551'}</span>
                                            </div>
                                        </div>
                                        <div class="service-card-actions">
                                            <button class="service-action-btn" onclick="openSchemeApplication('${scheme.apply_link || scheme.official_website || '#'}')">
                                                <i class="fas fa-file-alt"></i> <span data-i18n="apply_now">‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç</span>
                                            </button>
                                            <button class="service-action-btn secondary" onclick="openGovernmentScheme('${scheme.official_website || '#'}')">
                                                <i class="fas fa-globe"></i> <span data-i18n="official_website">‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'
                }
                        </div >
                    `;
                } else {
                    container.innerHTML = `
                    < div class="real-time-header" >
                            <h4 data-i18n="schemes_header">üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç - ${currentLocation}</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: Ultra-Dynamic Government APIs</p>
                        </div >
                    <div class="scheme-card">
                        <h5 data-i18n="pm_kisan_scheme">‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§®‡§ø‡§ß‡§ø</h5>
                        <p><strong data-i18n="amount_label">üí∞ ‡§∞‡§æ‡§∂‡§ø:</strong> ‚Çπ6,000 ‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡§∞‡•ç‡§∑</p>
                        <p><strong data-i18n="description_label">üìù ‡§µ‡§ø‡§µ‡§∞‡§£:</strong> ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§ï‡•ç‡§∑ ‡§Ü‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ</p>
                        <p><strong data-i18n="eligibility_label">‚úÖ ‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ:</strong> ‡§∏‡§≠‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§® ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞</p>
                        <p><strong data-i18n="helpline_label">üìû ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:</strong> 1800-180-1551</p>
                        <div class="scheme-actions">
                            <button class="btn btn-primary" onclick="openSchemeApplication('https://pmkisan.gov.in/')"><span data-i18n="apply_now">‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç</span></button>
                            <button class="btn btn-info" onclick="openGovernmentScheme('https://pmkisan.gov.in/')"><span data-i18n="official_website">‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü</span></button>
                        </div>
                    </div>
                `;
                }
                applyTranslations(lang); // Apply translations to dynamically loaded content
            } catch (error) {
                console.error('Error loading schemes:', error);
                container.innerHTML = `
                    < div class="real-time-header" >
                        <h4 data-i18n="schemes_header">üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç - ${currentLocation}</h4>
                        <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: Ultra-Dynamic Government APIs</p>
                    </div >
                    <div class="scheme-card">
                        <h5 data-i18n="pm_kisan_scheme">‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§®‡§ø‡§ß‡§ø</h5>
                        <p><strong data-i18n="amount_label">üí∞ ‡§∞‡§æ‡§∂‡§ø:</strong> ‚Çπ6,000 ‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡§∞‡•ç‡§∑</p>
                        <p><strong data-i18n="description_label">üìù ‡§µ‡§ø‡§µ‡§∞‡§£:</strong> ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§ï‡•ç‡§∑ ‡§Ü‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ</p>
                        <p><strong data-i18n="eligibility_label">‚úÖ ‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ:</strong> ‡§∏‡§≠‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§® ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞</p>
                        <p><strong data-i18n="helpline_label">üìû ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:</strong> 1800-180-1551</p>
                        <div class="scheme-actions">
                            <button class="btn btn-primary" onclick="openSchemeApplication('https://pmkisan.gov.in/')"><span data-i18n="apply_now">‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç</span></button>
                            <button class="btn btn-info" onclick="openGovernmentScheme('https://pmkisan.gov.in/')"><span data-i18n="official_website">‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü</span></button>
                        </div>
                    </div>
                `;
                applyTranslations(lang); // Apply translations to dynamically loaded content
            }
        }

        // Load Crop Recommendations - Ultra-Dynamic Real-Time Data (100+ Crops)
        async function loadCropRecommendations() {
            const container = document.getElementById('cropsData');

            try {
                // Add cache-busting timestamp and language
                const timestamp = new Date().getTime();
                const lang = localStorage.getItem('selectedLanguage') || 'hi';
                const response = await fetch(`/ api / advisories /? location = ${ currentLocation }& latitude=${ currentLatitude }& longitude=${ currentLongitude }& t=${ timestamp }& lang=${ lang } `);
                const data = await response.json();

                console.log('Crop Recommendations Data for', currentLocation, ':', data);

                if (data.top_4_recommendations && data.top_4_recommendations.length > 0) {
                    const recommendations = data.top_4_recommendations;
                    container.innerHTML = `
                    < div class="real-time-header" >
                            <h4 data-i18n="crop_advisory_header">üåæ ‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ - ${data.location}</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source || 'Ultra-Dynamic Government APIs'}</p>
                            <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                            <p class="analysis-info">üìà ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£: ${data.total_crops_analyzed || recommendations.length} ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£</p>
                        </div >
                    <div class="crops-grid">
                        ${recommendations.map((crop, index) => `
                                <div class="crop-card">
                                    <div class="crop-header">
                                        <h5>${decodeHtmlEntities(crop.name_hindi || crop.crop_name_hindi || crop.name)}</h5>
                                        <div class="crop-rank">#${index + 1}</div>
                                        <div class="profitability-score">${crop.suitability_score || crop.profitability_score || 85}/100</div>
                                    </div>
                                    <div class="crop-content">
                                        <div class="crop-info">
                                            <div class="info-item">
                                                <span class="info-label" data-i18n="reason_label">üí° ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§æ‡§∞‡§£:</span>
                                                <span class="info-value">${crop.reason_hindi || crop.reason || 'N/A'}</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label" data-i18n="yield_label">üìä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:</span>
                                                <span class="info-value">${crop.financials?.yield || crop.yield_prediction || 'N/A'}</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label" data-i18n="profit_label">üíµ ‡§≤‡§æ‡§≠:</span>
                                                <span class="info-value" style="color: #28a745;">${crop.financials?.profit_potential || crop.profit || 'N/A'}</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label" data-i18n="msp_label">üí∞ MSP:</span>
                                                <span class="info-value">${crop.financials?.msp || crop.msp || 'N/A'}</span>
                                            </div>
                                            <div class="info-item">
                                                <span class="info-label" data-i18n="weather_outlook">üå¶Ô∏è ‡§Æ‡•å‡§∏‡§Æ:</span>
                                                <span class="info-value">${crop.outlook || 'N/A'}</span>
                                            </div>
                                        </div>
                                        <div class="crop-metrics">
                                            <div class="metric">
                                                <span class="metric-label" data-i18n="profitability_label">‡§≤‡§æ‡§≠‡§¶‡§æ‡§Ø‡§ï‡§§‡§æ:</span>
                                                <span class="metric-value">${crop.profitability_score || 85}/100</span>
                                            </div>
                                            <div class="metric">
                                                <span class="metric-label" data-i18n="market_demand_label">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡§æ‡§Ç‡§ó:</span>
                                                <span class="metric-value">${crop.market_demand || 'Very High'}</span>
                                            </div>
                                            <div class="metric">
                                                <span class="metric-label" data-i18n="risk_level_label">‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡•ç‡§§‡§∞:</span>
                                                <span class="metric-value">${crop.risk_level || 'Low'}</span>
                                            </div>
                                            <div class="metric">
                                                <span class="metric-label" data-i18n="soil_type_label">‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä:</span>
                                                <span class="metric-value">${crop.soil_type || 'loamy'}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                    </div>
                `;
                } else {
                    container.innerHTML = `
                    < div class="real-time-header" >
                            <h4 data-i18n="crop_advisory_header">üåæ ‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ - ${currentLocation}</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: Ultra-Dynamic Government APIs</p>
                        </div >
                    <div class="crop-card">
                        <div class="crop-header">
                            <h5 data-i18n="wheat_crop">1. ‡§ó‡•á‡§π‡•Ç‡§Ç</h5>
                            <span class="profitability-score" data-i18n="profitability_score_value">85/100</span>
                        </div>
                        <div class="crop-details">
                            <div class="detail-row">
                                <span class="label" data-i18n="msp_label">üí∞ MSP:</span>
                                <span class="value">‚Çπ2,000/quintal</span>
                            </div>
                            <div class="detail-row">
                                <span class="label" data-i18n="yield_label">üìä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:</span>
                                <span class="value">50 quintals/hectare</span>
                            </div>
                            <div class="detail-row">
                                <span class="label" data-i18n="profit_label">üíµ ‡§≤‡§æ‡§≠:</span>
                                <span class="value">‚Çπ15,000/hectare (25%)</span>
                            </div>
                            <div class="detail-row">
                                <span class="label" data-i18n="cost_label">üí∏ ‡§≤‡§æ‡§ó‡§§:</span>
                                <span class="value">‚Çπ35,000/hectare</span>
                            </div>
                        </div>
                    </div>
                `;
                }
                applyTranslations(lang); // Apply translations to dynamically loaded content
            } catch (error) {
                console.error('Error loading crops:', error);
                container.innerHTML = `
                    < div class="real-time-header" >
                        <h4 data-i18n="crop_advisory_header">üåæ ‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ - ${currentLocation}</h4>
                        <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: Ultra-Dynamic Government APIs</p>
                    </div >
                    <div class="crop-card">
                        <div class="crop-header">
                            <h5 data-i18n="wheat_crop">1. ‡§ó‡•á‡§π‡•Ç‡§Ç</h5>
                            <span class="profitability-score" data-i18n="profitability_score_value">85/100</span>
                        </div>
                        <div class="crop-details">
                            <div class="detail-row">
                                <span class="label" data-i18n="msp_label">üí∞ MSP:</span>
                                <span class="value">‚Çπ2,000/quintal</span>
                            </div>
                            <div class="detail-row">
                                <span class="label" data-i18n="yield_label">üìä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:</span>
                                <span class="value">50 quintals/hectare</span>
                            </div>
                            <div class="detail-row">
                                <span class="label" data-i18n="profit_label">üíµ ‡§≤‡§æ‡§≠:</span>
                                <span class="value">‚Çπ15,000/hectare (25%)</span>
                            </div>
                            <div class="detail-row">
                                <span class="label" data-i18n="cost_label">üí∏ ‡§≤‡§æ‡§ó‡§§:</span>
                                <span class="value">‚Çπ35,000/hectare</span>
                            </div>
                        </div>
                    </div>
                `;
                applyTranslations(lang); // Apply translations to dynamically loaded content
            }
        }

        // Load Weather Data - Ultra-Dynamic Real-Time IMD Data
        async function loadWeatherData() {
            const container = document.getElementById('weatherData');

            try {
                // Add cache-busting timestamp and language
                const timestamp = new Date().getTime();
                const lang = localStorage.getItem('selectedLanguage') || 'hi';
                const response = await fetch(`/ api / weather /? location = ${ currentLocation }& latitude=${ currentLatitude }& longitude=${ currentLongitude }& t=${ timestamp }& lang=${ lang } `);
                const data = await response.json();

                console.log('Weather Data for', currentLocation, ':', data);

                if (data.current_weather) {
                    container.innerHTML = `
                    < div class="real-time-header" >
                            <h4 data-i18n="weather_info_header">üå§Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä - ${data.location}</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source}</p>
                            <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                        </div >

                        <!-- Current Weather -->
                        <div class="weather-card">
                            <div class="current-weather">
                                <div class="weather-main">
                                    <h5 data-i18n="current_weather_title">üå°Ô∏è ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•å‡§∏‡§Æ</h5>
                                    <div class="weather-temp">${data.current_weather.temperature || '28¬∞C'}</div>
                                    <div class="weather-condition">${data.current_weather.condition || translations[lang]['clear_sky']}</div>
                                    <div class="weather-feels-like" data-i18n="feels_like">‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã ‡§∞‡§π‡§æ: ${data.current_weather.feels_like || '30¬∞C'}</div>
                                </div>
                                <div class="weather-details">
                                    <div class="detail-item">
                                        <span class="icon">üíß</span>
                                        <span class="label" data-i18n="humidity">‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ:</span>
                                        <span class="value">${data.current_weather.humidity || '65%'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="icon">üí®</span>
                                        <span class="label" data-i18n="wind_speed">‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø:</span>
                                        <span class="value">${data.current_weather.wind_speed || '12 km/h'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="icon">üß≠</span>
                                        <span class="label" data-i18n="wind_direction">‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§¶‡§ø‡§∂‡§æ:</span>
                                        <span class="value">${data.current_weather.wind_direction || translations[lang]['north_east']}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="icon">üìä</span>
                                        <span class="label" data-i18n="pressure">‡§¶‡§¨‡§æ‡§µ:</span>
                                        <span class="value">${data.current_weather.pressure || '1013'} ${data.current_weather.pressure_unit || 'hPa'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="icon">üëÅÔ∏è</span>
                                        <span class="label" data-i18n="visibility">‡§¶‡•É‡§∂‡•ç‡§Ø‡§§‡§æ:</span>
                                        <span class="value">${data.current_weather.visibility || '10'} ${data.current_weather.visibility_unit || 'km'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="icon">‚òÄÔ∏è</span>
                                        <span class="label" data-i18n="uv_index">UV ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï:</span>
                                        <span class="value">${data.current_weather.uv_index || '5'}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!--Agricultural Advice-- >
                        <div class="weather-card">
                            <h5 data-i18n="agricultural_advice_title">üåæ ‡§ï‡•É‡§∑‡§ø ‡§∏‡•Å‡§ù‡§æ‡§µ</h5>
                            <div class="agricultural-advice">
                                <p>${data.agricultural_advice || translations[lang]['general_agri_advice']}</p>
                            </div>
                        </div>
                        
                        <!--Weather Forecast-- >
                        <div class="weather-card">
                            <h5 data-i18n="seven_day_forecast_title">üìÖ 7 ‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</h5>
                            <div class="forecast-grid">
                                ${data.forecast_7_days ? data.forecast_7_days.map(day => `
                                    <div class="forecast-item">
                                        <div class="forecast-day">${day.day || day.date}</div>
                                        <div class="forecast-temp">${day.temperature || '28¬∞C'}</div>
                                        <div class="forecast-condition">${day.condition || translations[lang]['clear_sky']}</div>
                                        <div class="forecast-humidity">${day.humidity || '65%'}</div>
                                        <div class="forecast-wind">${day.wind_speed || '12 km/h'}</div>
                                    </div>
                                `).join('') : `<p data-i18n="forecast_not_available">${translations[lang]['forecast_not_available']}</p>`}
                            </div>
                        </div>
                        
                        <!--Weather Alerts-- >
                        <div class="weather-card">
                            <h5 data-i18n="weather_alerts_title">‚ö†Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä</h5>
                            <div class="alerts-list">
                                ${data.alerts ? data.alerts.map(alert => `
                                    <div class="alert-item alert-${alert.severity}">
                                        <span class="alert-type">${alert.type}:</span>
                                        <span class="alert-message">${alert.message}</span>
                                    </div>
                                `).join('') : `<p data-i18n="no_alerts">${translations[lang]['no_alerts']}</p>`}
                            </div>
                        </div>
                            <h5 data-i18n="five_day_forecast_title">üìÖ 5-‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</h5>
                            <div class="forecast-grid">
                                ${data.forecast && data.forecast.length > 0 ? data.forecast.map(day => `
                                    <div class="forecast-item">
                                        <div class="forecast-day">${day.day}</div>
                                        <div class="forecast-date">${day.date}</div>
                                        <div class="forecast-temp">
                                            <span class="temp-max">${day.temp_max}${day.temp_unit}</span>
                                            <span class="temp-min">${day.temp_min}${day.temp_unit}</span>
                                        </div>
                                        <div class="forecast-condition">${day.condition}</div>
                                        <div class="forecast-details">
                                            <div class="forecast-detail">
                                        <span class="icon">üíß</span>
                                                <span>${day.humidity}%</span>
                                    </div>
                                            <div class="forecast-detail">
                                                <span class="icon">üí®</span>
                                                <span>${day.wind_speed} km/h</span>
                                    </div>
                                            <div class="forecast-detail">
                                                <span class="icon">üåßÔ∏è</span>
                                                <span>${day.rain_probability}%</span>
                                            </div>
                                        </div>
                                    </div>
                                `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                            </div>
                        </div >
                        
                        < !--Farmer Advice-- >
                        <div class="weather-card">
                            <h5 data-i18n="farmer_advice_title">üë®‚Äçüåæ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§≤‡§æ‡§π</h5>
                            <div class="advice-section">
                                <div class="advice-item">
                                        <span class="icon">üåæ</span>
                                    <span class="advice-text">${data.farmer_advice.general}</span>
                                    </div>
                                <div class="advice-item">
                                    <span class="icon">üå±</span>
                                    <span class="advice-text">${data.farmer_advice.crop_specific}</span>
                                </div>
                                <div class="advice-item">
                                    <span class="icon">‚ö†Ô∏è</span>
                                    <span class="advice-text">${data.farmer_advice.precautions}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!--Weather Alerts-- >
                    <div class="weather-card">
                        <h5 data-i18n="weather_alerts_title">üö® ‡§Æ‡•å‡§∏‡§Æ ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä</h5>
                        <div class="alerts-section">
                            ${data.alerts.map(alert => `
                                    <div class="alert-item alert-${alert.severity}">
                                        <span class="alert-icon">${alert.severity === 'high' ? 'üî¥' : alert.severity === 'medium' ? 'üü°' : 'üü¢'}</span>
                                        <span class="alert-type">${alert.type}</span>
                                        <span class="alert-message">${alert.message}</span>
                                    </div>
                                `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                        </div>
                    </div>
                `;
                } else {
                    container.innerHTML = `
                    < div class="real-time-header" >
                            <h4 data-i18n="weather_info_header">üå§Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä - ${currentLocation}</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: IMD (Indian Meteorological Department)</p>
                        </div >
                    <div class="weather-card">
                        <h5 data-i18n="current_weather_title">üå°Ô∏è ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•å‡§∏‡§Æ</h5>
                        <div class="weather-temp">28¬∞C</div>
                        <div class="weather-condition" data-i18n="clear_sky">‡§∏‡§æ‡§´ ‡§Ü‡§∏‡§Æ‡§æ‡§®</div>
                        <div class="weather-details">
                            <div class="detail-item">
                                <span class="icon">üíß</span>
                                <span class="label" data-i18n="humidity">‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ:</span>
                                <span class="value">65%</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">üí®</span>
                                <span class="label" data-i18n="wind_speed">‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø:</span>
                                <span class="value">12 km/h</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">üìä</span>
                                <span class="label" data-i18n="pressure">‡§¶‡§¨‡§æ‡§µ:</span>
                                <span class="value">1013 hPa</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">üëÅÔ∏è</span>
                                <span class="label" data-i18n="visibility">‡§¶‡•É‡§∂‡•ç‡§Ø‡§§‡§æ:</span>
                                <span class="value">10 km</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">‚òÄÔ∏è</span>
                                <span class="label" data-i18n="uv_index">UV ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï:</span>
                                <span class="value">5</span>
                            </div>
                        </div>
                    </div>
                `;
                }
                applyTranslations(lang); // Apply translations to dynamically loaded content
            } catch (error) {
                console.error('Error loading weather:', error);
                container.innerHTML = `
                    < div class="real-time-header" >
                        <h4 data-i18n="weather_info_header">üå§Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä - ${currentLocation}</h4>
                        <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: IMD (Indian Meteorological Department)</p>
                    </div >
                    <div class="weather-card">
                        <h5 data-i18n="current_weather_title">üå°Ô∏è ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•å‡§∏‡§Æ</h5>
                        <div class="weather-temp">28¬∞C</div>
                        <div class="weather-condition" data-i18n="clear_sky">‡§∏‡§æ‡§´ ‡§Ü‡§∏‡§Æ‡§æ‡§®</div>
                        <div class="weather-details">
                            <div class="detail-item">
                                <span class="icon">üíß</span>
                                <span class="label" data-i18n="humidity">‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ:</span>
                                <span class="value">65%</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">üí®</span>
                                <span class="label" data-i18n="wind_speed">‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø:</span>
                                <span class="value">12 km/h</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">üìä</span>
                                <span class="label" data-i18n="pressure">‡§¶‡§¨‡§æ‡§µ:</span>
                                <span class="value">1013 hPa</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">üëÅÔ∏è</span>
                                <span class="label" data-i18n="visibility">‡§¶‡•É‡§∂‡•ç‡§Ø‡§§‡§æ:</span>
                                <span class="value">10 km</span>
                            </div>
                            <div class="detail-item">
                                <span class="icon">‚òÄÔ∏è</span>
                                <span class="label" data-i18n="uv_index">UV ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï:</span>
                                <span class="value">5</span>
                            </div>
                        </div>
                    </div>
                `;
                applyTranslations(lang); // Apply translations to dynamically loaded content
            }
        }

        // Force reload market prices with cache busting
        function forceReloadMarketPrices() {
            console.log('Force reloading market prices...');
            const container = document.getElementById('pricesData');
            container.innerHTML = '<div class="loading" data-i18n="loading">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</div>';

            // Clear any cached data
            if ('caches' in window) {
                caches.keys().then(function (names) {
                    for (let name of names) {
                        caches.delete(name);
                    }
                });
            }

            // Reload with fresh data
            setTimeout(() => {
                loadMarketPrices();
            }, 100);
        }

        // Load Market Prices - Ultra-Dynamic Real-Time Agmarknet/e-NAM Data (v2.0)
        async function loadMarketPrices() {
            const container = document.getElementById('pricesData');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            try {
                // Ensure we have valid location data
                const location = currentLocation || 'Delhi';
                const lat = currentLatitude || 28.6139;
                const lon = currentLongitude || 77.2090;

                console.log('Loading market prices for:', { location, lat, lon });

                // Add cache-busting timestamp and version
                const timestamp = new Date().getTime();
                const version = 'v2.0';
                const response = await fetch(`/ api / market - prices /? location = ${ location }& latitude=${ lat }& longitude=${ lon }& t=${ timestamp }& v=${ version } `);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${ response.status } `);
                }

                const data = await response.json();

                console.log('Market Prices Data:', data);
                console.log('Crops Data:', data.market_prices?.top_crops?.length || 'No crops');
                console.log('Nearest Mandis:', data.nearest_mandis_data ? data.nearest_mandis_data.length : 'No mandis');

                // Store market data globally for mandi selection
                currentMarketData = data;

                // Auto-select nearest mandi if available
                if (data.auto_selected_mandi && !selectedMandi) {
                    selectedMandi = data.auto_selected_mandi;
                    const mandiDropdown = document.getElementById('mandiDropdown');
                    if (mandiDropdown) {
                        mandiDropdown.value = selectedMandi;
                        // Trigger change event to load mandi-specific prices
                        mandiDropdown.dispatchEvent(new Event('change'));
                    }
                }

                // Force square box layout for all cases
                if (data.market_prices && data.market_prices.top_crops && data.market_prices.top_crops.length > 0) {
                    container.innerHTML = `
                    < div class="real-time-header" >
                            <h4 data-i18n="market_prices_header">üí∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ - ${data.location}</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source}</p>
                            <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                        </div >
                        
                        < !--Mandi Selection Section-- >
                        <div class="mandi-search-container">
                            <h5 data-i18n="select_nearest_mandi">üè™ ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç</h5>
                            <div class="mandi-selection-container">
                                <div class="mandi-dropdown-container">
                                    <label for="mandiDropdown" data-i18n="select_mandi_label">üìç ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç (‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞)</label>
                                    <select id="mandiDropdown" class="form-control mandi-dropdown" onchange="updatePricesForSelectedMandi()">
                                        <option value="" data-i18n="select_mandi_placeholder">‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç...</option>
                                        ${data.market_prices.nearby_mandis ? data.market_prices.nearby_mandis.map(mandi => `
                                            <option value="${mandi.name}" ${mandi.auto_selected ? 'selected' : ''}>
                                                ${mandi.name} - ${mandi.distance} - ${mandi.specialty || 'General'}
                                            </option>
                                        `).join('') : ''}
                                </select>
                                    <div class="mandi-info-text">
                                        <small class="text-muted">üìç ${data.location} ‡§ï‡•á ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä</small>
                                    </div>
                                </div>
                                
                                <!-- Crop Filter Box -->
                                <div class="crop-filter-container">
                                    <label for="cropFilter" data-i18n="filter_crop_label">üåæ ‡§´‡§∏‡§≤ ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</label>
                                    <input type="text" id="cropFilter" placeholder="‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ö‡§æ‡§µ‡§≤)" class="form-control" onkeyup="filterCrops()" data-i18n="filter_crop_placeholder">
                            </div>
                        </div>
                                    </div>
                    
                        <div class="mandi-prices-grid">
                            ${data.market_prices.top_crops.map(crop => `
                                <div class="mandi-price-square">
                                    <div class="square-header">
                                        <h6>üåæ ${crop.crop_name_hindi || crop.crop_name}</h6>
                                        <span class="trend-icon">${crop.trend === '‡§¨‡§¢‡§º ‡§∞‡§π‡§æ' ? 'üìà' : crop.trend === '‡§ó‡§ø‡§∞ ‡§∞‡§π‡§æ' ? 'üìâ' : 'üìä'}</span>
                                </div>
                                    <div class="square-content">
                                        <div class="price-main">
                                            <span class="current-price">${crop.current_price}</span>
                                        </div>
                                        <div class="price-details">
                                            <div class="detail-row">
                                                <span class="label" data-i18n="msp_label">MSP:</span>
                                                <span class="value">${crop.msp}</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="label" data-i18n="profit_label">‡§≤‡§æ‡§≠:</span>
                                                <span class="value profit">${crop.profit}</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="label" data-i18n="percentage_label">%:</span>
                                                <span class="value profit-percent">${crop.profit_percentage}</span>
                                            </div>
                                            <div class="detail-row">
                                                <span class="label" data-i18n="demand_label">‡§Æ‡§æ‡§Ç‡§ó:</span>
                                                <span class="value">${crop.demand}</span>
                                        </div>
                                            <div class="detail-row">
                                                <span class="label" data-i18n="supply_label">‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø:</span>
                                                <span class="value">${crop.supply}</span>
                                        </div>
                                    </div>
                                        <div class="mandi-info">
                                            <span class="mandi-name">${data.mandi || 'Delhi Mandi'}</span>
                                            <span class="date">${new Date(data.timestamp).toLocaleDateString(lang === 'en' ? 'en-US' : 'hi-IN')}</span>
                                </div>
                    </div>
                                </div>
                            `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                        </div>
                `;
                } else {
                    // Fallback with square box layout
                    container.innerHTML = `
                    < div class="real-time-header" >
                            <h4 data-i18n="market_prices_header">üí∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ - ${currentLocation}</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: Ultra-Dynamic Government APIs</p>
                        </div >
                        
                        < !--Mandi Selection Section-- >
                        <div class="mandi-search-container">
                            <h5 data-i18n="select_nearest_mandi">üè™ ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç</h5>
                            <div class="mandi-selection-container">
                                <div class="mandi-dropdown-container">
                                    <label for="mandiDropdown" data-i18n="select_mandi_label">üìç ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç (‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞)</label>
                                    <select id="mandiDropdown" class="form-control mandi-dropdown" onchange="updatePricesForSelectedMandi()">
                                        <option value="" data-i18n="select_mandi_placeholder">‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç...</option>
                                        ${data.nearest_mandis_data ? data.nearest_mandis_data.map(mandi => `
                                            <option value="${mandi.name}" ${mandi.auto_selected ? 'data-auto-selected="true"' : ''}>
                                                ${mandi.name} ${mandi.auto_selected ? `(${translations[lang]['nearest']})` : ''} - ${mandi.distance} - ${mandi.specialty}
                                            </option>
                                        `).join('') : ''}
                        </select>
                                    <div class="mandi-info-text">
                                        <small class="text-muted">üìç ${data.location} ‡§ï‡•á ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä</small>
                                    </div>
                                    </div>
                                
                                <!-- Crop Filter Box -->
                                <div class="crop-filter-container">
                                    <label for="cropFilter" data-i18n="filter_crop_label">üåæ ‡§´‡§∏‡§≤ ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</label>
                                    <input type="text" id="cropFilter" placeholder="‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ö‡§æ‡§µ‡§≤)" class="form-control" onkeyup="filterCrops()" data-i18n="filter_crop_placeholder">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mandi-prices-grid">
                            <div class="mandi-price-square">
                                <div class="square-header">
                                    <h6 data-i18n="wheat_crop">üåæ ‡§ó‡•á‡§π‡•Ç‡§Ç</h6>
                                    <span class="trend-icon">üìà</span>
                                </div>
                                <div class="square-content">
                                    <div class="price-main">
                                        <span class="current-price">‚Çπ2,500</span>
                                        <span class="price-unit">/quintal</span>
                                    </div>
                                    <div class="price-details">
                                        <div class="detail-row">
                                            <span class="label" data-i18n="msp_label">MSP:</span>
                                            <span class="value">‚Çπ2,000</span>
                                        </div>
                                        <div class="detail-row">
                                            <span class="label" data-i18n="profit_label">‡§≤‡§æ‡§≠:</span>
                                            <span class="value profit">‚Çπ500</span>
                                        </div>
                                        <div class="detail-row">
                                            <span class="label" data-i18n="percentage_label">%:</span>
                                            <span class="value profit-percent">25%</span>
                                        </div>
                                    </div>
                                    <div class="mandi-info">
                                        <span class="mandi-name">Delhi Mandi</span>
                                        <span class="date">${new Date().toLocaleDateString(lang === 'en' ? 'en-US' : 'hi-IN')}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                `;
                }
                applyTranslations(lang); // Apply translations to dynamically loaded content
            } catch (error) {
                console.error('Error loading prices:', error);
                container.innerHTML = `
                    < div class="real-time-header" >
                        <h4 data-i18n="market_prices_header">üí∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ - ${currentLocation}</h4>
                        <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: Ultra-Dynamic Government APIs</p>
                    </div >
                    <div class="price-card">
                        <div class="price-header">
                            <h5 data-i18n="wheat_crop">üåæ ‡§ó‡•á‡§π‡•Ç‡§Ç</h5>
                            <span class="price-trend trend-up">üìà</span>
                        </div>
                        <div class="price-details">
                            <div class="price-item">
                                <span class="label" data-i18n="current_price_label">üí∞ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§≠‡§æ‡§µ:</span>
                                <span class="value current-price">‚Çπ2,500/quintal</span>
                            </div>
                            <div class="price-item">
                                <span class="label" data-i18n="msp_label_full">üèõÔ∏è ‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø:</span>
                                <span class="value msp-price">‚Çπ2,000/quintal</span>
                            </div>
                        </div>
                    </div>
                `;
                applyTranslations(lang); // Apply translations to dynamically loaded content
            }
        }

        // Update prices when a specific mandi is selected
        async function updatePricesForSelectedMandi() {
            const mandiDropdown = document.getElementById('mandiDropdown');
            if (!mandiDropdown) return;

            const selectedMandiName = mandiDropdown.value;
            if (!selectedMandiName) return;

            console.log('Loading prices for mandi:', selectedMandiName);

            const container = document.getElementById('pricesData');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            try {
                // Ensure we have valid location data
                const location = currentLocation || 'Delhi';
                const lat = currentLatitude || 28.6139;
                const lon = currentLongitude || 77.2090;

                // Show loading state
                const loadingMessage = translations[lang]?.loading_mandi_prices || '‡§Æ‡§Ç‡§°‡•Ä ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...';
                const pricesGrid = container.querySelector('.mandi-prices-grid');
                if (pricesGrid) {
                    pricesGrid.innerHTML = `< div class="loading" > ${ loadingMessage }</div > `;
                }

                // Fetch mandi-specific prices
                const timestamp = new Date().getTime();
                const response = await fetch(`/ api / market - prices /? location = ${ location }& mandi=${ encodeURIComponent(selectedMandiName) }& latitude=${ lat }& longitude=${ lon }& t=${ timestamp } `);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${ response.status } `);
                }

                const data = await response.json();

                console.log('Mandi-specific data:', data);

                // Update the prices grid with new data
                if (data.market_prices && data.market_prices.top_crops && pricesGrid) {
                    pricesGrid.innerHTML = data.market_prices.top_crops.map(crop => `
                    < div class="mandi-price-square" >
                            <div class="square-header">
                                <h6>üåæ ${crop.crop_name_hindi || crop.crop_name}</h6>
                                <span class="trend-icon">${crop.trend === '‡§¨‡§¢‡§º ‡§∞‡§π‡§æ' ? 'üìà' : crop.trend === '‡§ó‡§ø‡§∞ ‡§∞‡§π‡§æ' ? 'üìâ' : 'üìä'}</span>
                            </div>
                            <div class="square-content">
                                <div class="price-main">
                                    <span class="current-price">${crop.current_price}</span>
                                </div>
                                <div class="price-details">
                                    <div class="detail-row">
                                        <span class="label" data-i18n="msp_label">MSP:</span>
                                        <span class="value">${crop.msp}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="profit_label">‡§≤‡§æ‡§≠:</span>
                                        <span class="value profit">${crop.profit}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="percentage_label">%:</span>
                                        <span class="value profit-percent">${crop.profit_percentage}</span>
                                    </div>
                                </div>
                                <div class="mandi-info">
                                    <span class="mandi-name">${selectedMandiName}</span>
                                    <span class="date">${new Date().toLocaleDateString(lang === 'en' ? 'en-US' : 'hi-IN')}</span>
                                </div>
                            </div>
                        </div >
                    `).join('');
                    applyTranslations(lang);
                }
            } catch (error) {
                console.error('Error loading mandi prices:', error);
                const errorMessage = translations[lang]?.error_loading_mandi_prices || '‡§Æ‡§Ç‡§°‡•Ä ‡§ï‡•Ä‡§Æ‡§§ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø';
                const pricesGrid = container.querySelector('.mandi-prices-grid');
                if (pricesGrid) {
                    pricesGrid.innerHTML = `< div class="error-message" style = "color: red; padding: 20px; text-align: center;" >
                        <p>${errorMessage}</p>
                        <small>${error.message}</small>
                    </div > `;
                }
            }
        }

        // Mandi Search Functions
        async function searchMandiByLocation() {
            const locationInput = document.getElementById('mandiLocationSearch');
            const resultsContainer = document.getElementById('mandiSearchResults');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (!locationInput.value.trim()) {
                showNotification(translations[lang]['enter_mandi_location'], 'warning');
                return;
            }

            try {
                resultsContainer.innerHTML = `< div class="loading" data - i18n="searching_mandi" > ${ translations[lang]['searching_mandi'] }</div > `;

                // Search for mandis in the specified location
                const response = await fetch(`/ api / realtime - gov / mandi_search /? location = ${ encodeURIComponent(locationInput.value) }& latitude=${ currentLatitude }& longitude=${ currentLongitude } `);
                const data = await response.json();

                if (data.mandi_data) {
                    resultsContainer.innerHTML = `
                    < div class="mandi-results-summary" >
                            <h6 data-i18n="mandis_available_in">üìç ${data.location} ‡§Æ‡•á‡§Ç ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§Æ‡§Ç‡§°‡§ø‡§Ø‡§æ‡§Ç (${data.total_crops} ${translations[lang]['crops']})</h6>
                            <div class="mandi-grid">
                                ${Object.entries(data.mandi_data).map(([cropName, mandiInfo]) => `
                                    <div class="mandi-summary-square">
                                        <div class="square-header">
                                            <h6>üåæ ${mandiInfo.crop_name}</h6>
                                        </div>
                                        <div class="square-content">
                                            <div class="price-main">
                                                <span class="current-price">‚Çπ${mandiInfo.current_price?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</span>
                                                <span class="price-unit">/quintal</span>
                                            </div>
                                            <div class="mandi-name">${mandiInfo.mandi_name}</div>
                                            <div class="profit-info">
                                                <span class="profit" data-i18n="profit_label">‡§≤‡§æ‡§≠: ‚Çπ${mandiInfo.profit_margin?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</span>
                                                <span class="profit-percent">${mandiInfo.profit_percentage}%</span>
                                            </div>
                                        </div>
                                    </div>
                                `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                            </div>
                        </div >
                    `;
                } else {
                    resultsContainer.innerHTML = `< div class="no-results" data - i18n="no_mandi_info" > ${ translations[lang]['no_mandi_info'] }</div > `;
                }
                applyTranslations(lang); // Apply translations to dynamically loaded content
            } catch (error) {
                console.error('Mandi location search error:', error);
                resultsContainer.innerHTML = `< div class="error" data - i18n="mandi_search_error" > ${ translations[lang]['mandi_search_error'] }</div > `;
                showNotification(translations[lang]['mandi_search_error'], 'error');
            }
        }

        async function searchCropFromMandi() {
            const cropInput = document.getElementById('mandiCropSearch');
            const resultsContainer = document.getElementById('mandiSearchResults');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (!cropInput.value.trim()) {
                showNotification(translations[lang]['enter_crop_name'], 'warning');
                return;
            }

            try {
                resultsContainer.innerHTML = `< div class="loading" data - i18n="searching_crop" > ${ translations[lang]['searching_crop'] }</div > `;

                const response = await fetch(`/ api / realtime - gov / mandi_search /? location = ${ currentLocation }& crop=${ encodeURIComponent(cropInput.value) }& latitude=${ currentLatitude }& longitude=${ currentLongitude } `);
                const data = await response.json();

                if (data.mandi_info) {
                    const mandiInfo = data.mandi_info;
                    resultsContainer.innerHTML = `
                    < div class="crop-result-card" >
                            <h6>üåæ ${mandiInfo.crop_name} - ${mandiInfo.mandi_name}</h6>
                            <div class="crop-details-grid">
                                <div class="crop-detail-square">
                                    <div class="detail-label" data-i18n="current_price_label">üí∞ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§≠‡§æ‡§µ</div>
                                    <div class="detail-value">‚Çπ${mandiInfo.current_price?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}/quintal</div>
                                </div>
                                <div class="crop-detail-square">
                                    <div class="detail-label" data-i18n="msp_label_full">üèõÔ∏è ‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø</div>
                                    <div class="detail-value">‚Çπ${mandiInfo.msp?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}/quintal</div>
                                </div>
                                <div class="crop-detail-square">
                                    <div class="detail-label" data-i18n="profit_margin_label">üìà ‡§≤‡§æ‡§≠ ‡§Æ‡§æ‡§∞‡•ç‡§ú‡§ø‡§®</div>
                                    <div class="detail-value profit">‚Çπ${mandiInfo.profit_margin?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}/quintal</div>
                                </div>
                                <div class="crop-detail-square">
                                    <div class="detail-label" data-i18n="profit_percentage_label">üìä ‡§≤‡§æ‡§≠ ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§</div>
                                    <div class="detail-value profit-percent">${mandiInfo.profit_percentage}%</div>
                                </div>
                                <div class="crop-detail-square">
                                    <div class="detail-label" data-i18n="mandi_distance_label">üìç ‡§Æ‡§Ç‡§°‡•Ä ‡§¶‡•Ç‡§∞‡•Ä</div>
                                    <div class="detail-value">${mandiInfo.mandi_distance}</div>
                                </div>
                                <div class="crop-detail-square">
                                    <div class="detail-label" data-i18n="mandi_type_label">üè™ ‡§Æ‡§Ç‡§°‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</div>
                                    <div class="detail-value">${mandiInfo.mandi_type}</div>
                                </div>
                            </div>
                        </div >
                    `;
                } else {
                    resultsContainer.innerHTML = `< div class="no-results" data - i18n="no_crop_info" > ${ translations[lang]['no_crop_info'] }</div > `;
                }
                applyTranslations(lang); // Apply translations to dynamically loaded content
            } catch (error) {
                console.error('Crop search error:', error);
                resultsContainer.innerHTML = `< div class="error" data - i18n="crop_search_error" > ${ translations[lang]['crop_search_error'] }</div > `;
                showNotification(translations[lang]['crop_search_error'], 'error');
            }
        }

        // Handle Image Upload for Pest Detection
        document.getElementById('pestImageForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const container = document.getElementById('pestData');
            const imageFile = document.getElementById('cropImage').files[0];
            const cropName = document.getElementById('cropName').value;
            const symptoms = document.getElementById('symptoms').value;
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (!imageFile) {
                showNotification(translations[lang]['select_image_warning'], 'warning');
                return;
            }

            try {
                container.innerHTML = `< div class="loading" ><i class="fas fa-spinner fa-spin"></i><p data-i18n="analyzing_image">${translations[lang]['analyzing_image']}</p></div > `;

                const formData = new FormData();
                formData.append('image', imageFile);
                formData.append('crop', cropName);
                formData.append('location', currentLocation);
                formData.append('latitude', currentLatitude);
                formData.append('longitude', currentLongitude);
                formData.append('symptoms', symptoms);

                const response = await fetch('/api/realtime-gov/pest_detection/', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                displayPestAnalysis(data, true);

            } catch (error) {
                console.error('Image analysis error:', error);
                container.innerHTML = `< div class="error-message" data - i18n="image_analysis_error" > ${ translations[lang]['image_analysis_error'] }</div > `;
                showNotification(translations[lang]['image_analysis_error'], 'error');
            }
        });

        // Display Pest Analysis Results
        function displayPestAnalysis(data, isImageAnalysis = false) {
            const container = document.getElementById('pestData');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (isImageAnalysis && data.pest_analysis && data.pest_analysis.image_analysis) {
                const imageAnalysis = data.pest_analysis.image_analysis;
                const analysisResult = imageAnalysis.analysis_result;

                container.innerHTML = `
                    < div class="pest-analysis-container" >
                        <div class="analysis-header">
                            <h4 data-i18n="image_analysis_results">üîç ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source}</p>
                            <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                        </div>
                        
                        <div class="image-analysis-result">
                            <div class="analysis-card">
                                <h5 data-i18n="disease_name">üåæ ${analysisResult.disease_name_hindi || translations[lang]['disease_name']}</h5>
                                <div class="analysis-details">
                                    <div class="detail-item">
                                        <span class="label" data-i18n="confidence_level">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∏‡•ç‡§§‡§∞:</span>
                                        <span class="value">${Math.round((analysisResult.confidence || 0) * 100)}%</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="label" data-i18n="severity">‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ:</span>
                                        <span class="value ${analysisResult.severity}">${analysisResult.severity || translations[lang]['medium']}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="label" data-i18n="affected_area">‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞:</span>
                                        <span class="value">${analysisResult.affected_area || translations[lang]['unknown']}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="label" data-i18n="treatment_urgency">‡§â‡§™‡§ö‡§æ‡§∞ ‡§ï‡•Ä ‡§§‡§æ‡§§‡•ç‡§ï‡§æ‡§≤‡§ø‡§ï‡§§‡§æ:</span>
                                        <span class="value ${analysisResult.treatment_urgency}">${analysisResult.treatment_urgency || translations[lang]['medium']}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="treatment-recommendations">
                                <h5 data-i18n="treatment_suggestions">üíä ‡§â‡§™‡§ö‡§æ‡§∞ ‡§∏‡•Å‡§ù‡§æ‡§µ</h5>
                                <div class="recommendations-grid">
                                    ${(analysisResult.recommendations || []).map(rec => `
                                        <div class="recommendation-card">
                                            <h6>${rec.treatment}</h6>
                                            <p><strong data-i18n="dosage">‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ:</strong> ${rec.dosage}</p>
                                            <p><strong data-i18n="frequency">‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø:</strong> ${rec.frequency}</p>
                                        </div>
                                    `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                                </div>
                            </div>
                        </div>
                    </div >
                    `;
            } else {
                // Regular pest analysis display
                container.innerHTML = `
                    < div class="pest-analysis-container" >
                        <div class="analysis-header">
                            <h4 data-i18n="pest_control_info">üêõ ‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h4>
                            <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source}</p>
                            <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                        </div>
                        
                        <div class="pest-info-grid">
                            <div class="pest-category">
                                <h5 data-i18n="pests_category">üêõ ‡§ï‡•Ä‡§ü</h5>
                                ${(data.pest_analysis?.pests || []).map(pest => `
                                    <div class="pest-item">
                                        <h6>${pest.name_hindi} (${pest.name})</h6>
                                        <p><strong data-i18n="severity">‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ:</strong> ${pest.severity}</p>
                                        <p><strong data-i18n="description">‡§µ‡§ø‡§µ‡§∞‡§£:</strong> ${pest.description}</p>
                                        <p><strong data-i18n="treatment">‡§â‡§™‡§ö‡§æ‡§∞:</strong> ${pest.treatment}</p>
                                    </div>
                                `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                            </div>
                            
                            <div class="disease-category">
                                <h5 data-i18n="diseases_category">ü¶† ‡§∞‡•ã‡§ó</h5>
                                ${(data.pest_analysis?.diseases || []).map(disease => `
                                    <div class="disease-item">
                                        <h6>${disease.name_hindi} (${disease.name})</h6>
                                        <p><strong data-i18n="severity">‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ:</strong> ${disease.severity}</p>
                                        <p><strong data-i18n="description">‡§µ‡§ø‡§µ‡§∞‡§£:</strong> ${disease.description}</p>
                                        <p><strong data-i18n="treatment">‡§â‡§™‡§ö‡§æ‡§∞:</strong> ${disease.treatment}</p>
                                    </div>
                                `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                            </div>
                        </div>
                    </div >
                    `;
            }
            applyTranslations(lang); // Apply translations to dynamically loaded content
        }

        // Load Pest Control
        async function loadPestControl() {
            const container = document.getElementById('pestData');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            try {
                // Add cache-busting timestamp
                const timestamp = new Date().getTime();
                const response = await fetch(`/ api / realtime - gov / pest_detection /? t = ${ timestamp } `, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        crop: 'wheat',
                        location: currentLocation,
                        latitude: currentLatitude,
                        longitude: currentLongitude,
                        symptoms: ''
                    })
                });
                const data = await response.json();

                console.log('Pest Control Data for', currentLocation, ':', data);
                displayPestAnalysis(data, false);
            } catch (error) {
                console.error('Error loading pest control:', error);
                container.innerHTML = `< div class="data-card" ><h5 data-i18n="pest_control_header">üêõ ‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£</h5><p data-i18n="service_unavailable">${translations[lang]['service_unavailable']}</p></div > `;
                applyTranslations(lang); // Apply translations to dynamically loaded content
            }
        }

        // Open Scheme Application
        function openSchemeApplication(url) {
            const lang = localStorage.getItem('selectedLanguage') || 'hi';
            if (url && url !== 'undefined') {
                window.open(url, '_blank');
                showNotification(translations[lang]['opening_scheme_website'], 'info');
            } else {
                showNotification(translations[lang]['scheme_website_not_available'], 'warning');
            }
        }

        // Open Government Scheme Website
        function openGovernmentScheme(url) {
            const lang = localStorage.getItem('selectedLanguage') || 'hi';
            if (url && url !== 'undefined') {
                window.open(url, '_blank');
                showNotification(translations[lang]['opening_official_website'], 'info');
            } else {
                showNotification(translations[lang]['official_website_not_available'], 'warning');
            }
        }

        // Ask about scheme
        function askAboutScheme(schemeName) {
            const query = `${ schemeName } ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§∏‡•á ‡§¨‡§§‡§æ‡§è‡§Ç`;
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            fetch('/api/chatbot/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    query: query,
                    language: lang,
                    session_id: sessionId
                })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.response) {
                        showNotification(translations[lang]['scheme_info_found'], 'success');
                        alert(`${ schemeName } \n\n${ data.response } `);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification(translations[lang]['scheme_info_not_found'], 'error');
                });
        }

        // Get pest advice
        function getPestAdvice() {
            const crop = document.getElementById('cropName').value;
            const problem = document.getElementById('problemDescription').value;
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (!crop || !problem) {
                showNotification(translations[lang]['provide_crop_problem_details'], 'error');
                return;
            }

            const query = `${ crop } ‡§Æ‡•á‡§Ç ${ problem } ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§ï‡§æ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§¨‡§§‡§æ‡§è‡§Ç`;

            fetch('/api/chatbot/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    query: query,
                    language: lang,
                    session_id: sessionId
                })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.response) {
                        showNotification(translations[lang]['solution_found'], 'success');
                        alert(data.response);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification(translations[lang]['solution_not_found'], 'error');
                });
        }


        // Get cookie value by name (for CSRF token)
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // Send message to AI
        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            input.value = '';

            // Show loading
            const chatMessages = document.getElementById('chatMessages');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message bot-message loading-message';
            loadingDiv.innerHTML = `< i class="fas fa-spinner fa-spin" ></i > <span data-i18n="thinking">${translations[lang]['thinking']}</span>`;
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            applyTranslations(lang, loadingDiv); // Apply translation to loading message

            try {
                const response = await fetch('/api/chatbot/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({
                        query: message,
                        location: currentLocation,
                        language: lang
                    })
                });

                const data = await response.json();

                // Remove loading
                chatMessages.removeChild(loadingDiv);

                if (data.response) {
                    addMessage(data.response, 'bot');
                } else {
                    addMessage(translations[lang]['chatbot_no_response'], 'bot');
                }
            } catch (error) {
                console.error('Chatbot error:', error);
                chatMessages.removeChild(loadingDiv);
                addMessage(translations[lang]['chatbot_error'], 'bot');
            }
        }

        // Add message to chat
        function addMessage(text, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${ sender } -message`;
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (sender === 'user') {
                messageDiv.innerHTML = `< strong data - i18n="you" > ${ translations[lang]['you'] }:</strong > ${ text } `;
            } else {
                messageDiv.innerHTML = `< strong data - i18n="ai_assistant_name" > ${ translations[lang]['ai_assistant_name'] }:</strong > ${ text } `;
            }

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            applyTranslations(lang, messageDiv); // Apply translation to new message
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${ type } `;
            notification.style.display = 'block';

            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Handle Enter key in message input
        document.getElementById('messageInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Voice Input Functionality
        function startVoiceRecognition() {
            const lang = localStorage.getItem('selectedLanguage') || 'hi';
            if ('webkitSpeechRecognition' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.lang = lang === 'en' ? 'en-US' : 'hi-IN'; // Default to Hindi
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onstart = function () {
                    showNotification(translations[lang]['voice_listening'], 'info');
                    document.querySelector('.voice-btn').classList.add('listening');
                };

                recognition.onend = function () {
                    document.querySelector('.voice-btn').classList.remove('listening');
                };

                recognition.onresult = function (event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('messageInput').value = transcript;
                    showNotification(translations[lang]['voice_recognized'], 'success');
                };

                recognition.onerror = function (event) {
                    console.error('Voice recognition error:', event.error);
                    showNotification(translations[lang]['voice_input_error'], 'error');
                };

                recognition.start();
            } else {
                showNotification(translations[lang]['voice_input_not_supported'], 'error');
            }
        }

        // Location Search Functions
        async function searchLocations(event) {
            const query = event.target.value.trim();
            console.log('Searching for location:', query);

            // Clear previous timeout
            if (locationSearchTimeout) {
                clearTimeout(locationSearchTimeout);
            }

            if (query.length < 2) {
                hideLocationSuggestions();
                return;
            }

            // Debounce search
            locationSearchTimeout = setTimeout(async () => {
                try {
                    console.log('Making API request for:', query);
                    const response = await fetch(`/ api / locations / search /? q = ${ encodeURIComponent(query) } `);
                    console.log('API response status:', response.status);
                    const data = await response.json();
                    console.log('API response data:', data);

                    if (data.results && data.results.length > 0) {
                        showLocationSuggestions(data.results);
                    } else {
                        hideLocationSuggestions();
                    }
                } catch (error) {
                    console.error('Location search error:', error);
                    hideLocationSuggestions();
                }
            }, 300);
        }

        function showLocationSuggestions(suggestions = null) {
            const container = document.getElementById('locationSuggestions');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (suggestions) {
                container.innerHTML = suggestions.map(suggestion => `
                    < div class="location-suggestion" onclick = "selectLocation('${suggestion.name}', ${suggestion.lat}, ${suggestion.lon})" >
                        <div>
                            <div class="suggestion-name">${suggestion.name}</div>
                            <div class="suggestion-details">${suggestion.state || ''} ${suggestion.region || ''}</div>
                        </div>
                        <div class="suggestion-details">${suggestion.type || translations[lang]['location']}</div>
                    </div >
                    `).join('');
            }

            container.style.display = 'block';
            applyTranslations(lang, container); // Apply translations to dynamically loaded content
        }

        function hideLocationSuggestions() {
            const container = document.getElementById('locationSuggestions');
            container.style.display = 'none';
        }

        function selectLocation(name, lat, lon) {
            console.log('üìç Selecting location:', name, lat, lon);
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            // Update global location variables dynamically
            currentLocation = name;
            currentLatitude = lat;
            currentLongitude = lon;

            // Verify the update
            console.log('‚úÖ Location variables updated dynamically:', {
                currentLocation: currentLocation,
                currentLatitude: currentLatitude,
                currentLongitude: currentLongitude
            });

            // Update display
            document.getElementById('currentLocationDisplay').textContent = name;

            // Hide suggestions
            hideLocationSuggestions();

            // Clear location input
            const locationInput = document.getElementById('locationSearchInput');
            if (locationInput) {
                locationInput.value = name;
            }

            // Show notification
            showNotification(`${ translations[lang]['location_changed'] }: ${ name } `, 'success');

            // Reload all services with new location for real-time data
            console.log('üîÑ Reloading all services with new location:', name);
            setTimeout(() => {
                reloadAllServices();
            }, 300);
        }

        function searchCurrentLocation() {
            const input = document.getElementById('locationSearchInput');
            if (input.value.trim()) {
                searchLocations({ target: input });
            }
        }

        function detectLocation() {
            const lang = localStorage.getItem('selectedLanguage') || 'hi';
            if (navigator.geolocation) {
                showNotification(translations[lang]['detecting_location'], 'info');

                navigator.geolocation.getCurrentPosition(
                    function (position) {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;

                        // Reverse geocoding to get location name
                        fetch(`/ api / locations / reverse /? lat = ${ lat }& lon=${ lon } `)
                            .then(response => response.json())
                            .then(data => {
                                console.log('Reverse geocoding response:', data);

                                let locationName = 'Unknown Location';

                                if (data.location) {
                                    console.log('Location object:', data.location);

                                    // Try multiple possible properties
                                    if (typeof data.location === 'string') {
                                        locationName = data.location;
                                    } else if (data.location.name) {
                                        locationName = data.location.name;
                                    } else if (data.location.city) {
                                        locationName = data.location.city;
                                    } else if (data.location.state) {
                                        locationName = data.location.state;
                                    } else if (data.location.district) {
                                        locationName = data.location.district;
                                    }
                                } else if (data.name) {
                                    locationName = data.name;
                                } else if (data.city) {
                                    locationName = data.city;
                                }

                                console.log('Extracted location name:', locationName);
                                selectLocation(locationName, lat, lon);
                            })
                            .catch((error) => {
                                console.error('Reverse geocoding error:', error);
                                selectLocation(translations[lang]['detected_location'], lat, lon);
                            });
                    },
                    function (error) {
                        showNotification(translations[lang]['location_detection_failed'], 'error');
                    }
                );
            } else {
                showNotification(translations[lang]['geolocation_not_available'], 'error');
            }
        }

        function reloadAllServices() {
            console.log('üîÑ Reloading all services with location:', currentLocation, currentLatitude, currentLongitude);
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            // Reload all service data with new location
            const services = ['government-schemes', 'crop-recommendations', 'weather', 'market-prices', 'pest-control'];

            // Show loading notification
            showNotification(`${ translations[lang]['changing_location'] }... ${ currentLocation } ${ translations[lang]['updating_services'] } `, 'info');

            // Clear all service containers first
            const serviceContainers = {
                'government-schemes': 'schemesData',
                'crop-recommendations': 'cropsData',
                'weather': 'weatherData',
                'market-prices': 'pricesData',
                'pest-control': 'pestData'
            };

            console.log('üßπ Clearing all service containers...');
            services.forEach(serviceName => {
                const containerId = serviceContainers[serviceName];
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `< div class="loading" ><i class="fas fa-spinner fa-spin"></i><p>${currentLocation} ${translations[lang]['loading_for']}</p></div > `;
                    console.log(`‚úÖ Cleared container: ${ containerId } `);
                    applyTranslations(lang, container); // Apply translations to loading message
                } else {
                    console.error(`‚ùå Container not found: ${ containerId } `);
                }
            });

            // Reload each service with a small delay to prevent API overload
            console.log('üîÑ Starting service reload sequence...');
            services.forEach((serviceName, index) => {
                setTimeout(() => {
                    console.log(`üîÑ Reloading service: ${ serviceName } for location: ${ currentLocation } `);
                    try {
                        loadServiceData(serviceName);
                        console.log(`‚úÖ Service ${ serviceName } reload initiated`);
                    } catch (error) {
                        console.error(`‚ùå Error reloading service ${ serviceName }: `, error);
                    }
                }, index * 500); // 500ms delay between each service
            });

            // Also reload AI chatbot context
            if (typeof initializeIntelligentAssistant === 'function') {
                setTimeout(() => {
                    console.log('ü§ñ Reloading AI assistant for location:', currentLocation);
                    initializeIntelligentAssistant();
                }, services.length * 500);
            }

            // Show completion notification
            setTimeout(() => {
                showNotification(`‚úÖ ${ translations[lang]['all_services_updated_for'] } ${ currentLocation } `, 'success');
                console.log('üéâ All services reloaded successfully for location:', currentLocation);
            }, (services.length + 1) * 500 + 1000);
        }

        // Test function for debugging location updates
        function testLocationUpdate() {
            console.log('Testing location update...');
            console.log('Current location variables:', {
                currentLocation: currentLocation,
                currentLatitude: currentLatitude,
                currentLongitude: currentLongitude
            });

            // Test with Raebareli
            selectLocation('Raebareli', 26.2, 81.2);
        }

        // Make test function available globally
        window.testLocationUpdate = testLocationUpdate;

        // Force reload all services on page load
        function forceReloadAllServices() {
            console.log('Force reloading all services on page load');
            reloadAllServices();
        }

        // Auto-reload services every 5 minutes to keep data fresh
        setInterval(() => {
            console.log('Auto-reloading services to keep data fresh');
            reloadAllServices();
        }, 5 * 60 * 1000); // 5 minutes

        // Crop Search Functions
        let cropSearchTimeout;

        async function searchCrop(event) {
            const query = event.target.value.trim();
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            // Clear previous timeout
            if (cropSearchTimeout) {
                clearTimeout(cropSearchTimeout);
            }

            if (query.length < 2) {
                hideCropSuggestions();
                return;
            }

            // Debounce search
            cropSearchTimeout = setTimeout(async () => {
                try {
                    const response = await fetch(`/ api / realtime - gov / crop_search /? crop = ${ encodeURIComponent(query) }& location=${ currentLocation }& latitude=${ currentLatitude }& longitude=${ currentLongitude }& language=${ lang } `);
                    const data = await response.json();

                    if (data.comprehensive_analysis) {
                        showCropAnalysis(data);
                    } else if (data.available_crops) {
                        showCropSuggestions(data.available_crops.filter(crop =>
                            crop.toLowerCase().includes(query.toLowerCase())
                        ));
                    } else {
                        hideCropSuggestions();
                    }
                } catch (error) {
                    console.error('Crop search error:', error);
                    hideCropSuggestions();
                }
            }, 300);
        }

        function showCropSuggestions(crops = null) {
            const container = document.getElementById('cropSuggestions');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (crops) {
                container.innerHTML = crops.map(crop => `
                    < div class="crop-suggestion" onclick = "selectCrop('${crop}')" >
                        <div>
                            <div class="crop-suggestion-name">${crop}</div>
                            <div class="crop-suggestion-details" data-i18n="click_to_analyze">${translations[lang]['click_to_analyze']}</div>
                        </div>
                        <div class="crop-suggestion-details">üåæ</div>
                    </div >
                    `).join('');
            }

            container.style.display = 'block';
            applyTranslations(lang, container); // Apply translations to dynamically loaded content
        }

        function hideCropSuggestions() {
            const container = document.getElementById('cropSuggestions');
            container.style.display = 'none';
        }

        function selectCrop(cropName) {
            document.getElementById('cropSearchInput').value = cropName;
            hideCropSuggestions();
            searchSpecificCrop();
        }

        function searchSpecificCrop() {
            const cropName = document.getElementById('cropSearchInput').value.trim();
            if (cropName) {
                searchCrop({ target: { value: cropName } });
            }
        }

        function showCropAnalysis(data) {
            const container = document.getElementById('cropsData');
            const analysis = data.comprehensive_analysis;
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            container.innerHTML = `
                    < div class="real-time-header" >
                    <h4 data-i18n="crop_analysis_header">üåæ ${analysis.crop_name} - ${data.location}</h4>
                    <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source}</p>
                    <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                </div >

                    <div class="crop-analysis-container">
                        <div class="crop-analysis-card">
                            <h5 data-i18n="basic_info_title">üìä ‡§Æ‡•Ç‡§≤‡§≠‡•Ç‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h5>
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <strong data-i18n="season">‡§Æ‡•å‡§∏‡§Æ:</strong> ${analysis.season}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="duration">‡§Ö‡§µ‡§ß‡§ø:</strong> ${analysis.duration_days} ${translations[lang]['days']}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="yield">‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:</strong> ${analysis.yield_prediction}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="market_price">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ:</strong> ${analysis.current_market_price}
                                </div>
                            </div>
                        </div>

                        <div class="crop-analysis-card">
                            <h5 data-i18n="profit_analysis_title">üí∞ ‡§≤‡§æ‡§≠ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£</h5>
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <strong data-i18n="cost">‡§≤‡§æ‡§ó‡§§:</strong> ${analysis.input_cost}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="revenue">‡§Ü‡§Ø:</strong> ${analysis.revenue}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="profit">‡§≤‡§æ‡§≠:</strong> ${analysis.profit}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="profit_percentage">‡§≤‡§æ‡§≠ %:</strong> ${analysis.profit_percentage}
                                </div>
                            </div>
                        </div>

                        <div class="crop-analysis-card">
                            <h5 data-i18n="cultivation_info_title">üå± ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h5>
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <strong data-i18n="soil">‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä:</strong> ${analysis.soil_type}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="water_requirement">‡§™‡§æ‡§®‡•Ä:</strong> ${analysis.water_requirement}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="temperature">‡§§‡§æ‡§™‡§Æ‡§æ‡§®:</strong> ${analysis.temperature_range}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="government_support">‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ:</strong> ${analysis.government_support}
                                </div>
                            </div>
                        </div>

                        <div class="crop-analysis-card">
                            <h5 data-i18n="future_prediction_title">üìà ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä</h5>
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <strong data-i18n="future_price">‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§:</strong> ${analysis.future_price_prediction?.next_3_months || '‚Çπ2,500/quintal'}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="next_season_yield">‡§Ö‡§ó‡§≤‡•á ‡§∏‡•Ä‡§ú‡§® ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:</strong> ${analysis.yield_prediction_next_season?.predicted_yield || '40 quintals/hectare'}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="next_season_profit">‡§Ö‡§ó‡§≤‡•á ‡§∏‡•Ä‡§ú‡§® ‡§≤‡§æ‡§≠:</strong> ${analysis.profit_prediction_next_season?.predicted_profit || '‚Çπ60,000/hectare'}
                                </div>
                                <div class="analysis-item">
                                    <strong data-i18n="risk_level">‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡•ç‡§§‡§∞:</strong> ${analysis.risk_level}
                                </div>
                            </div>
                        </div>
                    </div>
                `;

            hideCropSuggestions();
            applyTranslations(lang, container); // Apply translations to dynamically loaded content
        }

        // Mandi Selection and Crop Filtering Functions
        let selectedMandi = null;
        let currentMarketData = null;

        async function updatePricesForSelectedMandi() {
            const mandiDropdown = document.getElementById('mandiDropdown');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';
            if (!mandiDropdown || !mandiDropdown.value) return;

            selectedMandi = mandiDropdown.value;
            console.log('Selected Mandi:', selectedMandi);

            try {
                const container = document.getElementById('pricesData');
                container.innerHTML = `< div class="loading" data - i18n="loading_mandi_prices" > ${ translations[lang]['loading_mandi_prices'] }</div > `;

                const response = await fetch(`/ api / realtime - gov / market_prices /? location = ${ currentLocation }& latitude=${ currentLatitude }& longitude=${ currentLongitude }& mandi=${ encodeURIComponent(selectedMandi) } `);
                const data = await response.json();

                if (data.status === 'success' && data.crops && data.crops.length > 0) {
                    currentMarketData = data;
                    displayMandiPrices(data);
                } else {
                    container.innerHTML = `< div class="error" data - i18n="no_price_info_for_mandi" > ${ translations[lang]['no_price_info_for_mandi'] }</div > `;
                }
                applyTranslations(lang, container); // Apply translations to dynamically loaded content
            } catch (error) {
                console.error('Error loading mandi prices:', error);
                document.getElementById('pricesData').innerHTML = `< div class="error" data - i18n="error_loading_mandi_prices" > ${ translations[lang]['error_loading_mandi_prices'] }</div > `;
                applyTranslations(lang, document.getElementById('pricesData')); // Apply translations to dynamically loaded content
            }
        }

        function displayMandiPrices(data) {
            const container = document.getElementById('pricesData');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';
            container.innerHTML = `
                    < div class="real-time-header" >
                    <h4 data-i18n="market_prices_header">üí∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ - ${data.location}</h4>
                    <p class="data-source" data-i18n="data_source">üìä ‡§∏‡•ç‡§∞‡•ã‡§§: ${data.data_source || 'Ultra-Dynamic Government APIs'}</p>
                    <p class="timestamp" data-i18n="last_updated">üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü: ${new Date(data.timestamp).toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN')}</p>
                </div >
                
                < !--Mandi Selection Section-- >
                <div class="mandi-search-container">
                    <h5 data-i18n="select_nearest_mandi">üè™ ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç</h5>
                    <div class="mandi-selection-container">
                        <div class="mandi-dropdown-container">
                            <label for="mandiDropdown" data-i18n="select_mandi_label">üìç ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç (‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞)</label>
                            <select id="mandiDropdown" class="form-control mandi-dropdown" onchange="updatePricesForSelectedMandi()">
                                <option value="" data-i18n="select_mandi_placeholder">‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç...</option>
                                ${(data.nearest_mandis_data || data.nearest_mandis || []).map(mandi => `
                                    <option value="${mandi.name}" ${mandi.name === selectedMandi ? 'selected' : ''}>
                                        ${mandi.name} ${mandi.auto_selected ? `(${translations[lang]['nearest']})` : ''} - ${mandi.distance} - ${mandi.specialty}
                                    </option>
                                `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                            </select>
                            <div class="mandi-info-text">
                                <small class="text-muted" data-i18n="nearest_mandi_hint">üìç ${data.location} ‡§ï‡•á ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä</small>
                            </div>
                        </div>
                        
                        <!-- Crop Filter Box -->
                        <div class="crop-filter-container">
                            <label for="cropFilter" data-i18n="filter_crop_label">üåæ ‡§´‡§∏‡§≤ ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</label>
                            <input type="text" id="cropFilter" placeholder="‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ö‡§æ‡§µ‡§≤)" class="form-control" onkeyup="filterCrops()" data-i18n="filter_crop_placeholder">
                        </div>
                    </div>
                </div>
                
                <div class="mandi-prices-grid">
                    ${data.crops.map(crop => `
                        <div class="mandi-price-square">
                            <div class="square-header">
                                <h6>üåæ ${crop.name}</h6>
                                <span class="trend-icon">${crop.market_trend === 'Rising' ? 'üìà' : crop.market_trend === 'Falling' ? 'üìâ' : 'üìä'}</span>
                            </div>
                            <div class="square-content">
                                <div class="price-main">
                                    <span class="current-price">‚Çπ${crop.current_price?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN') || '2,500'}</span>
                                    <span class="price-unit">/quintal</span>
                                </div>
                                <div class="price-details">
                                    <div class="detail-row">
                                        <span class="label" data-i18n="msp_label">MSP:</span>
                                        <span class="value">‚Çπ${crop.msp?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN') || '2,000'}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="profit_label">‡§≤‡§æ‡§≠:</span>
                                        <span class="value profit">‚Çπ${crop.profit_margin?.toLocaleString(lang === 'en' ? 'en-US' : 'hi-IN') || '500'}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="percentage_label">%:</span>
                                        <span class="value profit-percent">${crop.profit_percentage || 25}%</span>
                                    </div>
                                </div>
                                <div class="mandi-info">
                                    <span class="mandi-name">${crop.mandi || 'Delhi Mandi'}</span>
                                    <span class="date">${crop.date || new Date().toLocaleDateString(lang === 'en' ? 'en-US' : 'hi-IN')}</span>
                                </div>
                            </div>
                        </div>
                    `).join('') : '\u003cp>??????????? ?????? ???? ??\u003c/p>'}
                </div>
                `;
            applyTranslations(lang, container); // Apply translations to dynamically loaded content
        }

        async function updatePricesForSelectedMandi() {
            const mandiDropdown = document.getElementById('mandiDropdown');
            const selectedMandi = mandiDropdown.value;
            const lang = localStorage.getItem('selectedLanguage') || 'hi';

            if (!selectedMandi) return;

            console.log(`Updating prices for mandi: ${ selectedMandi } `);

            const pricesGrid = document.querySelector('.mandi-prices-grid');
            pricesGrid.innerHTML = `< div class="text-center p-4" ><div class="spinner-border text-success" role="status"></div><p>${translations[lang]['loading_mandi_prices']}</p></div > `;

            try {
                const response = await fetch(`/ api / realtime - gov / market_prices /? location = ${ currentLocation }& mandi=${ encodeURIComponent(selectedMandi) }& language=${ lang } `);
                const data = await response.json();

                if (data.status === 'success' && data.market_prices && data.market_prices.top_crops) {
                    const crops = data.market_prices.top_crops;

                    if (crops.length === 0) {
                        pricesGrid.innerHTML = `< div class="text-center p-4" > <p>${translations[lang]['no_price_info_for_mandi']}</p></div > `;
                        return;
                    }

                    pricesGrid.innerHTML = crops.map(crop => `
                    < div class="mandi-price-square" >
                            <div class="square-header">
                                <h6>üåæ ${crop.crop_name_hindi || crop.crop_name}</h6>
                                <span class="trend-icon">${crop.trend === '‡§¨‡§¢‡§º ‡§∞‡§π‡§æ' ? 'üìà' : crop.trend === '‡§ó‡§ø‡§∞ ‡§∞‡§π‡§æ' ? 'üìâ' : 'üìä'}</span>
                            </div>
                            <div class="square-content">
                                <div class="price-main">
                                    <span class="current-price">${crop.current_price}</span>
                                    <span class="price-unit">/quintal</span>
                                </div>
                                <div class="price-details">
                                    <div class="detail-row">
                                        <span class="label" data-i18n="msp_label">MSP:</span>
                                        <span class="value">${crop.msp}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="profit_label">‡§≤‡§æ‡§≠:</span>
                                        <span class="value profit">${crop.profit}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="percentage_label">%:</span>
                                        <span class="value profit-percent">${crop.profit_percentage}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="demand_label">‡§Æ‡§æ‡§Ç‡§ó:</span>
                                        <span class="value">${crop.demand}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="label" data-i18n="supply_label">‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø:</span>
                                        <span class="value">${crop.supply}</span>
                                    </div>
                                </div>
                                <div class="mandi-info">
                                    <span class="mandi-name">${crop.mandi || selectedMandi}</span>
                                    <span class="date">${crop.date || new Date().toLocaleDateString(lang === 'en' ? 'en-US' : 'hi-IN')}</span>
                                </div>
                            </div>
                        </div >
                    `).join('');

                    applyTranslations(lang, pricesGrid);
                } else {
                    pricesGrid.innerHTML = `< div class="text-center p-4" > <p>${translations[lang]['error_loading_mandi_prices']}</p></div > `;
                }
            } catch (error) {
                console.error('Error updating mandi prices:', error);
                pricesGrid.innerHTML = `< div class="text-center p-4" > <p>${translations[lang]['error_loading_mandi_prices']}</p></div > `;
            }
        }

        function filterCrops() {
            const filterInput = document.getElementById('cropFilter');
            const cropCards = document.querySelectorAll('.mandi-price-square');

            if (!filterInput) return;

            const filterValue = filterInput.value.toLowerCase();

            cropCards.forEach(card => {
                const cropName = card.querySelector('h6').textContent.toLowerCase();
                if (cropName.includes(filterValue)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Setup service cards with proper event listeners
        function setupServiceCards() {
            const serviceCards = document.querySelectorAll('.service-card');
            console.log('üéØ Setting up', serviceCards.length, 'service cards');

            serviceCards.forEach((card, index) => {
                // Get service name from onclick attribute or data attribute
                let serviceName = card.getAttribute('data-service');
                if (!serviceName) {
                    const onclickAttr = card.getAttribute('onclick');
                    serviceName = onclickAttr?.match(/showService\('([^']+)'\)/)?.[1];
                }

                if (!serviceName) {
                    console.warn('Service name not found for card:', card);
                    return;
                }

                // Store service name in data attribute for easy access
                card.setAttribute('data-service', serviceName);

                // Remove onclick attribute to avoid conflicts
                card.removeAttribute('onclick');

                // Create a unified click handler
                const handleCardClick = function (e) {
                    // Don't prevent default if clicking on a link or button
                    const target = e.target;
                    if (target.tagName === 'BUTTON' || target.tagName === 'A' || target.closest('button') || target.closest('a')) {
                        return; // Let the button/link handle its own click
                    }

                    e.preventDefault();
                    e.stopPropagation();

                    console.log('üéØ Service card clicked:', serviceName);
                    showService(serviceName);

                    // Add visual feedback
                    card.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        card.style.transform = '';
                    }, 150);
                };

                // Add click event listener to entire card
                card.addEventListener('click', handleCardClick);

                // Also make buttons clickable and trigger the same action
                const button = card.querySelector('.service-button');
                if (button) {
                    button.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('üéØ Service button clicked:', serviceName);
                        showService(serviceName);
                    });
                }

                console.log(`‚úÖ Service card ${ index + 1 } setup complete: ${ serviceName } `);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üåæ ‡§ï‡•É‡§∑‡§ø‡§Æ‡§ø‡§§‡•ç‡§∞ AI Frontend Loaded Successfully!');
            const lang = localStorage.getItem('selectedLanguage') || 'hi';
            showNotification(translations[lang]['all_services_ready'], 'success');

            // Setup service cards
            setupServiceCards();

            // Setup location search input event handler
            const locationInput = document.getElementById('locationSearchInput');
            if (locationInput) {
                locationInput.addEventListener('input', searchLocations);
                console.log('‚úÖ Location search input event handler set up');
            } else {
                console.error('‚ùå Location search input not found');
            }

            // Load initial service data
            setTimeout(() => {
                console.log('Loading initial service data...');
                reloadAllServices();
            }, 1000);
        });
        // Multi-language Support
        const translations = {
            'en': {
                'app_title': 'Agri-Advisory AI',
                'home': 'Home',
                'weather': 'Weather',
                'market_prices': 'Market Prices',
                'schemes': 'Schemes',
                'crop_advisory': 'Crop Advisory',
                'pest_control': 'Pest Control',
                'ai_assistant': 'AI Assistant',
                'hero_subtitle': 'Farmer\'s best friend - Smart farming with AI',
                'search_location_placeholder': 'Search city, district or village...',
                'current_location_label': 'üìç Current Location:',
                'detect_location': 'Detect Location',
                'essential_services_title': 'Essential Services for Farmers',
                'schemes_description': 'Central and state government agricultural schemes. Information on subsidies, loans and other assistance.',
                'view_schemes': 'View Schemes',
                'crop_advisory_description': 'AI-powered recommendations for best crops in your area. Based on weather, soil, prices.',
                'get_crop_advisory': 'Get Crop Advisory',
                'weather_description': 'Accurate weather information and forecast. Know everything about rain, temperature, wind speed.',
                'view_weather': 'View Weather',
                'market_prices_description': 'Real-time market prices and trends. Know the right price for your crop and the best time to sell.',
                'view_prices': 'View Prices',
                'pest_control_description': 'AI-powered pest and disease identification. Upload crop photo and instantly know the problem and how to fix it.',
                'check_now': 'Check Now',
                'ai_assistant_description': 'Get answers to any agriculture-related questions. Talk to 24/7 available AI assistant and get instant advice.',
                'talk_now': 'Talk Now',
                'schemes_header': 'üèõÔ∏è Government Schemes',
                'loading_schemes': 'Loading schemes...',
                'crop_advisory_header': 'üåæ Crop Advisory',
                'search_crop_placeholder': 'Search crop (e.g.: wheat, paddy, maize)...',
                'loading_crop_advisory': 'Loading crop advisory...',
                'weather_forecast_header': 'üå§Ô∏è Weather Forecast',
                'loading_weather': 'Loading weather information...',
                'market_prices_header': 'üí∞ Market Prices',
                'refresh': 'Refresh',
                'loading_market_prices': 'Loading market prices...',
                'pest_control_header': 'üêõ Pest Control',
                'upload_crop_image_title': '<h5><i class="fas fa-camera"></i> Upload Crop Image</h5>',
                'select_crop_image_label': 'Select crop image:',
                'image_format_hint': 'Upload image in JPG, PNG or JPEG format',
                'crop_name_label': 'Crop Name:',
                'crop_name_placeholder': 'e.g.: Wheat, Rice, Maize',
                'problem_description_label': 'Problem Description:',
                'symptoms_placeholder': 'Describe symptoms visible in the crop',
                'analyze': 'Analyze',
                'manual_analysis_title': '<h5><i class="fas fa-info-circle"></i> Manual Analysis</h5>',
                'manual_analysis_title': 'Manual Analysis',
                'manual_analysis_description': 'Get pest and disease information without image:',
                'general_pest_info': 'General Pest Info',
                'loading_pest_control': 'Loading pest control information...',
                'ai_assistant_header': 'ü§ñ AI Assistant',
                'ai_assistant_name': 'KrishiMitra AI:',
                'ai_assistant_welcome': 'Namaste! I can help you with all agriculture related problems. What do you want to know?',
                'type_your_question_placeholder': 'Type your question...',
                'send': 'Send',
                'thinking': 'Thinking...',
                'data_source': 'üìä Source:',
                'last_updated': 'üïí Last Updated:',
                'total_schemes': 'üìä Total Schemes:',
                'scheme_badge': 'Scheme',
                'amount_label': 'üí∞ Amount:',
                'description_label': 'üìù Description:',
                'eligibility_label': '‚úÖ Eligibility:',
                'helpline_label': 'üìû Helpline:',
                'apply_now': 'Apply Now',
                'official_website': 'Official Website',
                'pm_kisan_scheme': 'PM Kisan Samman Nidhi',
                'crops_analyzed': 'üìà Analysis:',
                'profitability_score_value': 'Profitability Score:',
                'msp_label': 'üí∞ MSP:',
                'yield_label': 'üìä Yield:',
                'profit_label': 'üíµ Profit:',
                'cost_label': 'üí∏ Cost:',
                'future_price_3m': 'üìà Future Price (3 Months):',
                'future_price_6m': 'üìà Future Price (6 Months):',
                'future_price_1y': 'üìà Future Price (1 Year):',
                'profitability_label': 'Profitability:',
                'market_demand_label': 'Market Demand:',
                'risk_level_label': 'Risk Level:',
                'soil_type_label': 'Soil Type:',
                'wheat_crop': 'Wheat',
                'weather_info_header': 'üå§Ô∏è Weather Info',
                'current_weather_title': 'üå°Ô∏è Current Weather',
                'clear_sky': 'Clear Sky',
                'feels_like': 'Feels Like:',
                'humidity': 'Humidity:',
                'wind_speed': 'Wind Speed:',
                'wind_direction': 'Wind Direction:',
                'pressure': 'Pressure:',
                'visibility': 'Visibility:',
                'uv_index': 'UV Index:',
                'agricultural_advice_title': 'üåæ Agricultural Advice',
                'general_agri_advice': 'Continue general agricultural activities',
                'seven_day_forecast_title': 'üìÖ 7 Day Forecast',
                'forecast_not_available': 'Forecast not available',
                'weather_alerts_title': '‚ö†Ô∏è Weather Alerts',
                'no_alerts': 'No alerts',
                'five_day_forecast_title': 'üìÖ 5-Day Forecast',
                'farmer_advice_title': 'üë®‚Äçüåæ Farmer Advice',
                'loading': 'Loading...',
                'select_nearest_mandi': 'üè™ Select Nearest Mandi',
                'select_mandi_label': 'üìç Select Mandi (By Location)',
                'select_mandi_placeholder': 'Select Mandi...',
                'nearest': 'Nearest',
                'nearest_mandi_hint': 'üìç Nearest Mandi to',
                'filter_crop_label': 'üåæ Filter Crop',
                'filter_crop_placeholder': 'Type crop name (e.g., Wheat, Rice)',
                'percentage_label': '%:',
                'demand_label': 'Demand:',
                'supply_label': 'Supply:',
                'current_price_label': 'üí∞ Current Price:',
                'msp_label_full': 'üèõÔ∏è Minimum Support Price:',
                'enter_mandi_location': 'Please enter mandi name or location',
                'searching_mandi': 'Searching mandi...',
                'mandis_available_in': 'üìç Mandis available in',
                'crops': 'crops',
                'no_mandi_info': 'Mandi information not available for this location',
                'mandi_search_error': 'Error in mandi search',
                'enter_crop_name': 'Please enter crop name',
                'searching_crop': 'Searching crop...',
                'profit_margin_label': 'üìà Profit Margin',
                'profit_percentage_label': 'üìä Profit Percentage',
                'mandi_distance_label': 'üìç Mandi Distance',
                'mandi_type_label': 'üè™ Mandi Type',
                'no_crop_info': 'Mandi information not available for this crop',
                'crop_search_error': 'Error in crop search',
                'select_image_warning': 'Please select an image',
                'analyzing_image': 'Analyzing image...',
                'image_analysis_error': 'Error in image analysis. Please try again.',
                'image_analysis_results': 'üîç Image Analysis Results',
                'disease_name': 'Disease Name',
                'confidence_level': 'Confidence Level:',
                'severity': 'Severity:',
                'medium': 'Medium',
                'affected_area': 'Affected Area:',
                'unknown': 'Unknown',
                'treatment_urgency': 'Treatment Urgency:',
                'treatment_suggestions': 'üíä Treatment Suggestions',
                'dosage': 'Dosage:',
                'frequency': 'Frequency:',
                'pest_control_info': 'üêõ Pest Control Information',
                'pests_category': 'üêõ Pests',
                'description': 'Description:',
                'treatment': 'Treatment:',
                'diseases_category': 'ü¶† Diseases',
                'service_unavailable': 'Service is available. Please try again later.',
                'opening_scheme_website': 'Opening official scheme website...',
                'scheme_website_not_available': 'Scheme website not available',
                'opening_official_website': 'Opening official website...',
                'official_website_not_available': 'Official website not available',
                'scheme_info_found': 'Scheme information found!',
                'scheme_info_not_found': 'Scheme information not found',
                'provide_crop_problem_details': 'Please provide crop and problem details',
                'solution_found': 'Solution found!',
                'solution_not_found': 'Solution not found',
                'chatbot_no_response': 'Sorry, I cannot answer right now.',
                'chatbot_error': 'Sorry, there is a technical issue.',
                'you': 'You',
                'voice_recognized': 'Voice recognized',
                'voice_input_not_supported': 'Your browser does not support voice input',
                'location': 'location',
                'location_changed': 'Location changed',
                'detecting_location': 'Detecting location...',
                'detected_location': 'Detected Location',
                'location_detection_failed': 'Location detection failed',
                'geolocation_not_available': 'Geolocation feature is not available',
                'changing_location': 'Changing location',
                'updating_services': 'services are updating',
                'loading_for': 'loading for',
                'all_services_updated_for': 'All services updated for',
                'click_to_analyze': 'Click to analyze',
                'crop_analysis_header': 'üåæ Crop Analysis',
                'basic_info_title': 'üìä Basic Information',
                'season': 'Season',
                'duration': 'Duration',
                'days': 'days',
                'yield': 'Yield',
                'market_price': 'Market Price',
                'profit_analysis_title': 'üí∞ Profit Analysis',
                'cost': 'Cost',
                'revenue': 'Revenue',
                'profit': 'Profit',
                'cultivation_info_title': 'üå± Cultivation Information',
                'soil': 'Soil',
                'water_requirement': 'Water Requirement',
                'temperature': 'Temperature',
                'government_support': 'Government Support',
                'future_prediction_title': 'üìà Future Prediction',
                'future_price': 'Future Price',
                'next_season_yield': 'Next Season Yield',
                'next_season_profit': 'Next Season Profit',
                'loading_mandi_prices': 'Loading mandi prices...',
                'no_price_info_for_mandi': 'No price information available for this mandi',
                'error_loading_mandi_prices': 'Error loading mandi prices',
                'weather_info_header': 'üå§Ô∏è Weather Information',
                'all_services_ready': 'All services are ready!'
            },
            'hi': {
                'app_title': '‡§ï‡•É‡§∑‡§ø‡§Æ‡§ø‡§§‡•ç‡§∞ AI',
                'home': '‡§π‡•ã‡§Æ',
                'weather': '‡§Æ‡•å‡§∏‡§Æ',
                'market_prices': '‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ',
                'schemes': '‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç',
                'crop_advisory': '‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π',
                'pest_control': '‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£',
                'ai_assistant': 'AI ‡§∏‡§π‡§æ‡§Ø‡§ï',
                'hero_subtitle': '‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§¶‡•ã‡§∏‡•ç‡§§ - AI ‡§∏‡•á ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§ñ‡•á‡§§‡•Ä ‡§ï‡§∞‡•á‡§Ç',
                'search_location_placeholder': '‡§∂‡§π‡§∞, ‡§ú‡§ø‡§≤‡§æ ‡§Ø‡§æ ‡§ó‡§æ‡§Å‡§µ ‡§ñ‡•ã‡§ú‡•á‡§Ç...',
                'current_location_label': 'üìç ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§•‡§æ‡§®:',
                'detect_location': '‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç',
                'essential_services_title': '‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                'schemes_description': '‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§î‡§∞ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ï‡•É‡§∑‡§ø ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç‡•§ ‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä, ‡§ã‡§£ ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä‡•§',
                'view_schemes': '‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç',
                'crop_advisory_description': 'AI ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Ü‡§™‡§ï‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•§ ‡§Æ‡•å‡§∏‡§Æ, ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä, ‡§ï‡•Ä‡§Æ‡§§‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞‡•§',
                'get_crop_advisory': '‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
                'weather_description': '‡§∏‡§ü‡•Ä‡§ï ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§î‡§∞ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®‡•§ ‡§¨‡§æ‡§∞‡§ø‡§∂, ‡§§‡§æ‡§™‡§Æ‡§æ‡§®, ‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§',
                'view_weather': '‡§Æ‡•å‡§∏‡§Æ ‡§¶‡•á‡§ñ‡•á‡§Ç',
                'market_prices_description': '‡§∞‡§ø‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§î‡§∞ ‡§∞‡•Å‡§ù‡§æ‡§®‡•§ ‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§∏‡§π‡•Ä ‡§ï‡•Ä‡§Æ‡§§ ‡§ú‡§æ‡§®‡•á‡§Ç ‡§î‡§∞ ‡§¨‡•á‡§ö‡§®‡•á ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø ‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§',
                'view_prices': '‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç',
                'pest_control_description': 'AI ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡•Ä‡§ü ‡§î‡§∞ ‡§∞‡•ã‡§ó ‡§ï‡•Ä ‡§™‡§π‡§ö‡§æ‡§®‡•§ ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ú‡§æ‡§®‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ï‡•à‡§∏‡•á ‡§†‡•Ä‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§',
                'check_now': '‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç',
                'ai_assistant_description': '‡§ï‡•É‡§∑‡§ø ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§∏‡§µ‡§æ‡§≤ ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§™‡§æ‡§è‡§Ç‡•§ 24/7 ‡§â‡§™‡§≤‡§¨‡•ç‡§ß AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§∏‡•á ‡§¨‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç‡•§',
                'talk_now': '‡§¨‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç',
                'schemes_header': 'üèõÔ∏è ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç',
                'loading_schemes': '‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...',
                'crop_advisory_header': 'üåæ ‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ',
                'search_crop_placeholder': '‡§´‡§∏‡§≤ ‡§ñ‡•ã‡§ú‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ß‡§æ‡§®, ‡§Æ‡§ï‡•ç‡§ï‡§æ)...',
                'loading_crop_advisory': '‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...',
                'weather_forecast_header': 'üå§Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®',
                'loading_weather': '‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...',
                'market_prices_header': 'üí∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç',
                'refresh': '‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∂ ‡§ï‡§∞‡•á‡§Ç',
                'loading_market_prices': '‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...',
                'pest_control_header': 'üêõ ‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£',
                'upload_crop_image_title': '<h5><i class="fas fa-camera"></i> ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</h5>',
                'select_crop_image_label': '‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç:',
                'image_format_hint': 'JPG, PNG ‡§Ø‡§æ JPEG ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
                'crop_name_label': '‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ:',
                'crop_name_placeholder': '‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ö‡§æ‡§µ‡§≤, ‡§Æ‡§ï‡•ç‡§ï‡§æ',
                'problem_description_label': '‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£:',
                'symptoms_placeholder': '‡§´‡§∏‡§≤ ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§¨‡§§‡§æ‡§è‡§Ç',
                'analyze': '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç',
                'manual_analysis_title': '<h5><i class="fas fa-info-circle"></i> ‡§Æ‡•à‡§®‡•Å‡§Ö‡§≤ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£</h5>',
                'manual_analysis_description': '‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§≠‡•Ä ‡§ï‡•Ä‡§ü ‡§î‡§∞ ‡§∞‡•ã‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç:',
                'general_pest_info': '‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡•Ä‡§ü ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',
                'loading_pest_control': '‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...',
                'ai_assistant_header': 'ü§ñ AI ‡§∏‡§π‡§æ‡§Ø‡§ï',
                'ai_assistant_name': '‡§ï‡•É‡§∑‡§ø‡§Æ‡§ø‡§§‡•ç‡§∞ AI',
                'ai_assistant_welcome': '‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•É‡§∑‡§ø ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡•Ä ‡§∏‡§≠‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ ‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§ú‡§æ‡§®‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
                'type_your_question_placeholder': '‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç...',
                'send': '‡§≠‡•á‡§ú‡•á‡§Ç',
                'thinking': '‡§∏‡•ã‡§ö ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç...',
                'select_location': '‡§∏‡•ç‡§•‡§æ‡§® ‡§ö‡•Å‡§®‡•á‡§Ç',
                'search_placeholder': '‡§∏‡•ç‡§•‡§æ‡§® ‡§ñ‡•ã‡§ú‡•á‡§Ç...',
                'voice_listening': '‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å...',
                'voice_error': '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§™‡§π‡§ö‡§æ‡§®‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø',
                'loading': '‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...',
                'current_weather_title': 'üå°Ô∏è ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•å‡§∏‡§Æ',
                'temperature': '‡§§‡§æ‡§™‡§Æ‡§æ‡§®',
                'humidity': '‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ',
                'wind_speed': '‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø',
                'wind_direction': '‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§¶‡§ø‡§∂‡§æ',
                'pressure': '‡§¶‡§¨‡§æ‡§µ',
                'visibility': '‡§¶‡•É‡§∂‡•ç‡§Ø‡§§‡§æ',
                'uv_index': 'UV ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï',
                'agricultural_advice_title': 'üåæ ‡§ï‡•É‡§∑‡§ø ‡§∏‡•Å‡§ù‡§æ‡§µ',
                'forecast_7_days': '7 ‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®',
                'mandi_prices': '‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ',
                'crop': '‡§´‡§∏‡§≤',
                'price': '‡§≠‡§æ‡§µ',
                'arrival': '‡§Ü‡§µ‡§ï',
                'min_price': '‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ‡§≠‡§æ‡§µ',
                'max_price': '‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§≠‡§æ‡§µ',
                'modal_price': '‡§Æ‡•â‡§°‡§≤ ‡§≠‡§æ‡§µ',
                'trend': '‡§∞‡•Å‡§ù‡§æ‡§®',
                'buy': '‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç',
                'sell': '‡§¨‡•á‡§ö‡•á‡§Ç',
                'hold': '‡§∞‡•ã‡§ï‡•á‡§Ç',
                'search_crop': '‡§´‡§∏‡§≤ ‡§ñ‡•ã‡§ú‡•á‡§Ç',
                'search_mandi': '‡§Æ‡§Ç‡§°‡•Ä ‡§ñ‡•ã‡§ú‡•á‡§Ç',
                'pest_detection': '‡§ï‡•Ä‡§ü ‡§™‡§π‡§ö‡§æ‡§®',
                'upload_image': '‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
                'results': '‡§™‡§∞‡§ø‡§£‡§æ‡§Æ',
                'recommendation': '‡§∏‡•Å‡§ù‡§æ‡§µ',
                'apply': '‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡•á‡§Ç',
                'close': '‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
                'submit': '‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç',
                'cancel': '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
                'login': '‡§≤‡•â‡§ó‡§ø‡§®',
                'register': '‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞',
                'logout': '‡§≤‡•â‡§ó‡§Ü‡§â‡§ü',
                'profile': '‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤',
                'settings': '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏',
                'language': '‡§≠‡§æ‡§∑‡§æ',
                'help': '‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                'about': '‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç',
                'contact': '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï',
                'terms': '‡§∂‡§∞‡•ç‡§§‡•á‡§Ç',
                'privacy': '‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø‡§§‡§æ',
                'copyright': '‡§ï‡•â‡§™‡•Ä‡§∞‡§æ‡§á‡§ü',
                'all_rights_reserved': '‡§∏‡§∞‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§',
                'powered_by': '‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§',
                'agri_advisory_team': '‡§ï‡•É‡§∑‡§ø ‡§∏‡§≤‡§æ‡§π ‡§ü‡•Ä‡§Æ',
                'version': '‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£',
                'data_source': 'üìä ‡§∏‡•ç‡§∞‡•ã‡§§:',
                'last_updated': 'üïí ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü:',
                'total_schemes': 'üìä ‡§ï‡•Å‡§≤ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç:',
                'scheme_badge': '‡§Ø‡•ã‡§ú‡§®‡§æ',
                'amount_label': 'üí∞ ‡§∞‡§æ‡§∂‡§ø:',
                'not_available': '‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç',
                'description_label': 'üìù ‡§µ‡§ø‡§µ‡§∞‡§£:',
                'eligibility_label': '‚úÖ ‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ:',
                'all_farmers': '‡§∏‡§≠‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§®',
                'helpline_label': 'üìû ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:',
                'apply_now': '‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç',
                'official_website': '‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü',
                'pm_kisan_scheme': '‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§®‡§ø‡§ß‡§ø',
                'crops_analyzed': 'üìà ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£: ${data.total_crops_analyzed || recommendations.length} ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
                'profitability_score_value': '${crop.profitability_score || 85}/100',
                'msp_label': 'üí∞ MSP:',
                'yield_label': 'üìä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:',
                'profit_label': 'üíµ ‡§≤‡§æ‡§≠:',
                'cost_label': 'üí∏ ‡§≤‡§æ‡§ó‡§§:',
                'future_price_3m': 'üìà ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§ (3 ‡§Æ‡§π‡•Ä‡§®‡•á):',
                'future_price_6m': 'üìà ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§ (6 ‡§Æ‡§π‡•Ä‡§®‡•á):',
                'future_price_1y': 'üìà ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§ (1 ‡§µ‡§∞‡•ç‡§∑):',
                'profitability_label': '‡§≤‡§æ‡§≠‡§¶‡§æ‡§Ø‡§ï‡§§‡§æ:',
                'market_demand_label': '‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡§æ‡§Ç‡§ó:',
                'risk_level_label': '‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡•ç‡§§‡§∞:',
                'soil_type_label': '‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä:',
                'wheat_crop': '1. ‡§ó‡•á‡§π‡•Ç‡§Ç',
                'clear_sky': '‡§∏‡§æ‡§´ ‡§Ü‡§∏‡§Æ‡§æ‡§®',
                'feels_like': '‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã ‡§∞‡§π‡§æ:',
                'north_east': '‡§â‡§§‡•ç‡§§‡§∞-‡§™‡•Ç‡§∞‡•ç‡§µ',
                'general_agri_advice': '‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡•É‡§∑‡§ø ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç',
                'seven_day_forecast_title': 'üìÖ 7 ‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®',
                'forecast_not_available': '‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç',
                'weather_alerts_title': '‚ö†Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä',
                'no_alerts': '‡§ï‡•ã‡§à ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä ‡§®‡§π‡•Ä‡§Ç',
                'five_day_forecast_title': 'üìÖ 5-‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®',
                'farmer_advice_title': 'üë®‚Äçüåæ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§≤‡§æ‡§π',
                'select_nearest_mandi': 'üè™ ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç',
                'select_mandi_label': 'üìç ‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç (‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞)',
                'select_mandi_placeholder': '‡§Æ‡§Ç‡§°‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç...',
                'nearest_mandi_hint': 'üìç ${data.location} ‡§ï‡•á ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§Æ‡§Ç‡§°‡•Ä',
                'filter_crop_label': 'üåæ ‡§´‡§∏‡§≤ ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç',
                'filter_crop_placeholder': '‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•à‡§∏‡•á: ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ö‡§æ‡§µ‡§≤)',
                'percentage_label': '%:',
                'demand_label': '‡§Æ‡§æ‡§Ç‡§ó:',
                'supply_label': '‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø:',
                'nearest': '‡§®‡§ø‡§ï‡§ü‡§§‡§Æ',
                'current_price_label': 'üí∞ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§≠‡§æ‡§µ:',
                'msp_label_full': 'üèõÔ∏è ‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø:',
                'enter_mandi_location': '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡§Ç‡§°‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§Ø‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'searching_mandi': '‡§Æ‡§Ç‡§°‡•Ä ‡§ñ‡•ã‡§ú ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...',
                'mandis_available_in': 'üìç ${data.location} ‡§Æ‡•á‡§Ç ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§Æ‡§Ç‡§°‡§ø‡§Ø‡§æ‡§Ç (${data.total_crops} ‡§´‡§∏‡§≤‡•á‡§Ç)',
                'crops': '‡§´‡§∏‡§≤‡•á‡§Ç',
                'no_mandi_info': '‡§á‡§∏ ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§Ç‡§°‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
                'mandi_search_error': '‡§Æ‡§Ç‡§°‡•Ä ‡§ñ‡•ã‡§ú ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à',
                'enter_crop_name': '‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'searching_crop': '‡§´‡§∏‡§≤ ‡§ñ‡•ã‡§ú ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...',
                'profit_margin_label': 'üìà ‡§≤‡§æ‡§≠ ‡§Æ‡§æ‡§∞‡•ç‡§ú‡§ø‡§®',
                'profit_percentage_label': 'üìä ‡§≤‡§æ‡§≠ ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§',
                'mandi_distance_label': 'üìç ‡§Æ‡§Ç‡§°‡•Ä ‡§¶‡•Ç‡§∞‡•Ä',
                'mandi_type_label': 'üè™ ‡§Æ‡§Ç‡§°‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                'no_crop_info': '‡§á‡§∏ ‡§´‡§∏‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§Ç‡§°‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
                'crop_search_error': '‡§´‡§∏‡§≤ ‡§ñ‡•ã‡§ú ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à',
                'select_image_warning': '‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç',
                'analyzing_image': '‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...',
                'image_analysis_error': '‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§',
                'image_analysis_results': 'üîç ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ',
                'disease_name': '‡§∞‡•ã‡§ó ‡§ï‡§æ ‡§®‡§æ‡§Æ',
                'confidence_level': '‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∏‡•ç‡§§‡§∞:',
                'severity': '‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ:',
                'medium': '‡§Æ‡§ß‡•ç‡§Ø‡§Æ',
                'affected_area': '‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞:',
                'unknown': '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§',
                'treatment_urgency': '‡§â‡§™‡§ö‡§æ‡§∞ ‡§ï‡•Ä ‡§§‡§æ‡§§‡•ç‡§ï‡§æ‡§≤‡§ø‡§ï‡§§‡§æ:',
                'treatment_suggestions': 'üíä ‡§â‡§™‡§ö‡§æ‡§∞ ‡§∏‡•Å‡§ù‡§æ‡§µ',
                'dosage': '‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ:',
                'frequency': '‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø:',
                'pest_control_info': 'üêõ ‡§ï‡•Ä‡§ü ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',
                'pests_category': 'üêõ ‡§ï‡•Ä‡§ü',
                'description': '‡§µ‡§ø‡§µ‡§∞‡§£:',
                'treatment': '‡§â‡§™‡§ö‡§æ‡§∞:',
                'diseases_category': 'ü¶† ‡§∞‡•ã‡§ó',
                'service_unavailable': '‡§∏‡•á‡§µ‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§',
                'opening_scheme_website': '‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•Ä ‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ñ‡•Å‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à...',
                'scheme_website_not_available': '‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•Ä ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
                'opening_official_website': '‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ñ‡•Å‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à...',
                'official_website_not_available': '‡§Ü‡§ß‡§ø‡§ï‡§æ‡§∞‡§ø‡§ï ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
                'scheme_info_found': '‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Æ‡§ø‡§≤ ‡§ó‡§à!',
                'scheme_info_not_found': '‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤ ‡§∏‡§ï‡•Ä',
                'provide_crop_problem_details': '‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§∏‡§≤ ‡§î‡§∞ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§Ç',
                'solution_found': '‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ!',
                'solution_not_found': '‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤ ‡§∏‡§ï‡§æ',
                'chatbot_no_response': '‡§ï‡•ç‡§∑‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç, ‡§Æ‡•à‡§Ç ‡§Ö‡§≠‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á ‡§™‡§æ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å‡•§',
                'chatbot_error': '‡§ï‡•ç‡§∑‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç, ‡§ï‡•ã‡§à ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•à‡•§',
                'you': '‡§Ü‡§™',
                'voice_recognized': '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§™‡§π‡§ö‡§æ‡§®‡•Ä ‡§ó‡§à',
                'voice_input_not_supported': '‡§Ü‡§™‡§ï‡§æ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§µ‡•â‡§Ø‡§∏ ‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ ‡§π‡•à',
                'location': '‡§∏‡•ç‡§•‡§æ‡§®',
                'location_changed': '‡§∏‡•ç‡§•‡§æ‡§® ‡§¨‡§¶‡§≤‡§æ ‡§ó‡§Ø‡§æ',
                'detecting_location': '‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...',
                'detected_location': '‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§∏‡•ç‡§•‡§æ‡§®',
                'location_detection_failed': '‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡§æ ‡§™‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§æ',
                'geolocation_not_available': '‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§§‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
                'changing_location': '‡§∏‡•ç‡§•‡§æ‡§® ‡§¨‡§¶‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à',
                'updating_services': '‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§≠‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç',
                'loading_for': '‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...',
                'all_services_updated_for': '‡§∏‡§≠‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ${currentLocation} ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã ‡§ó‡§à‡§Ç',
                'click_to_analyze': '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç',
                'crop_analysis_header': 'üåæ ‡§´‡§∏‡§≤ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
                'basic_info_title': 'üìä ‡§Æ‡•Ç‡§≤‡§≠‡•Ç‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',
                'season': '‡§Æ‡•å‡§∏‡§Æ',
                'duration': '‡§Ö‡§µ‡§ß‡§ø',
                'days': '‡§¶‡§ø‡§®',
                'yield': '‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®',
                'market_price': '‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ',
                'profit_analysis_title': 'üí∞ ‡§≤‡§æ‡§≠ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
                'cost': '‡§≤‡§æ‡§ó‡§§',
                'revenue': '‡§Ü‡§Ø',
                'profit': '‡§≤‡§æ‡§≠',
                'cultivation_info_title': 'üå± ‡§ñ‡•á‡§§‡•Ä ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',
                'soil': '‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä',
                'water_requirement': '‡§™‡§æ‡§®‡•Ä',
                'temperature': '‡§§‡§æ‡§™‡§Æ‡§æ‡§®',
                'government_support': '‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                'future_prediction_title': 'üìà ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä',
                'future_price': '‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§',
                'next_season_yield': '‡§Ö‡§ó‡§≤‡•á ‡§∏‡•Ä‡§ú‡§® ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®',
                'next_season_profit': '‡§Ö‡§ó‡§≤‡•á ‡§∏‡•Ä‡§ú‡§® ‡§≤‡§æ‡§≠',
                'loading_mandi_prices': '‡§Æ‡§Ç‡§°‡•Ä ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...',
                'no_price_info_for_mandi': '‡§á‡§∏ ‡§Æ‡§Ç‡§°‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•Ä‡§Æ‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
                'error_loading_mandi_prices': '‡§Æ‡§Ç‡§°‡•Ä ‡§ï‡•Ä‡§Æ‡§§ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø',
                'weather_info_header': 'üå§Ô∏è ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',
                'all_services_ready': '‡§∏‡§≠‡•Ä ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡§Ç!'
            }
        };

        function applyTranslations(lang, scope = document) {
            const t = translations[lang] || translations['hi'];
            scope.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (t[key]) {
                    if (element.placeholder) {
                        element.placeholder = t[key];
                    } else {
                        // Handle special cases for innerHTML or specific content
                        if (key === 'upload_crop_image_title' || key === 'manual_analysis_title') {
                            element.innerHTML = t[key];
                        } else if (key === 'ai_assistant_name' || key === 'you') {
                            // For strong tags within messages, just update text content
                            element.textContent = t[key];
                        }
                        else {
                            element.textContent = t[key];
                        }
                    }
                }
            });
        }

        function changeLanguage(lang) {
            localStorage.setItem('selectedLanguage', lang);
            const langName = {
                'hi': '‡§π‡§ø‡§Ç‡§¶‡•Ä',
                'en': 'English',
                'pa': '‡§™‡§Ç‡§ú‡§æ‡§¨‡•Ä',
                'gu': '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä',
                'mr': '‡§Æ‡§∞‡§æ‡§†‡•Ä',
                'ta': '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç',
                'te': '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å'
            }[lang] || '‡§π‡§ø‡§Ç‡§¶‡•Ä';

            document.getElementById('currentLanguage').textContent = langName;

            // Apply translations
            applyTranslations(lang);

            // Reload services to get data in new language
            // We don't reload page to keep state, just refresh data
            reloadAllServices();
        }

        // Initialize Language
        const savedLang = localStorage.getItem('selectedLanguage') || 'hi';
        document.getElementById('currentLanguage').textContent = {
            'hi': '‡§π‡§ø‡§Ç‡§¶‡•Ä',
            'en': 'English',
            'pa': '‡§™‡§Ç‡§ú‡§æ‡§¨‡•Ä',
            'gu': '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä',
            'mr': '‡§Æ‡§∞‡§æ‡§†‡•Ä',
            'ta': '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç',
            'te': '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å'
        }[savedLang];

        // Apply initial translations
        changeLanguage(savedLang);

    </script>
</body>

</html>
```